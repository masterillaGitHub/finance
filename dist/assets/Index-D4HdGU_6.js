import{A as H,n as J,o as c,d as f,t as w,j as h,m as k,q as K,b,_ as D,s as E,r as n,w as i,k as e,f as Q,a as l,e as V,p as L,g as P,c as y,x as X,F,y as j,z as Y,B as Z,l as tt,M as et}from"./index-mGmnSMP9.js";import{A as R,t as z,a as $,b as nt,u as at}from"./entities-CnCDWlHM.js";import{u as O,a as W,_ as ot,r as st,b as it,c as ct}from"./DialogComponent-DHP2mKVI.js";import"./CurrenciesList-Dcu-0Niq.js";class rt extends H{getResource(){return"accounts"}static balanceTotal(){return new this().balanceTotal()}async balanceTotal(){return await this.get("/balance-total")}}var G=J({name:"Vue3Autocounter",interval:null,props:{startAmount:{type:Number,default:0},endAmount:{type:Number,default:0,required:!0},duration:{type:Number,default:3,validator(t){return t>=1}},autoinit:{type:Boolean,default:!0},prefix:{type:String,default:""},suffix:{type:String,default:""},separator:{type:String,default:","},decimalSeparator:{type:String,default:"."},decimals:{type:Number,default:0,validator(t){return t>=0}}},data(){return{timestamp:0,startTimestamp:0,currentAmount:0,currentStartAmount:0,currentDuration:0,paused:!1,remaining:0,animationFrame:0}},mounted(){this.currentAmount=this.startAmount,this.currentStartAmount=this.startAmount,this.currentDuration=this.duration*1e3,this.remaining=this.duration*1e3,this.autoinit?this.start():this.paused=!0,this.$emit("mounted")},unmounted(){this.cancelAnimation()},watch:{startAmount(){this.reset()},endAmount(){this.reset()},duration(){this.reset()}},computed:{isCountingUp(){return this.endAmount>this.startAmount},displayedAmount(){return`${this.prefix}${this.formatedAmount}${this.suffix}`},formatedAmount(){const t=/(\d+)(\d{3})/;let o=this.currentAmount.toFixed(this.decimals);o+="";let s=o.split("."),a=s[0],r=s.length>1?this.decimalSeparator+s[1]:"",u=!isNaN(parseFloat(this.separator));if(this.separator&&!u)for(;t.test(a);)a=a.replace(t,"$1"+this.separator+"$2");return a+r}},methods:{start(){this.cancelAnimation(),this.currentStartAmount=this.startAmount,this.startTimestamp=null,this.currentDuration=this.duration*1e3,this.paused=!1,this.animationFrame=window.requestAnimationFrame(this.counting)},pause(){this.paused||(this.cancelAnimation(),this.paused=!0)},resume(){this.paused&&(this.startTimestamp=null,this.currentDuration=+this.remaining,this.currentStartAmount=+this.currentAmount,this.animationFrame=window.requestAnimationFrame(this.counting),this.paused=!1)},reset(){this.paused=!1,this.startTimestamp=null,this.cancelAnimation(),this.currentAmount=this.startAmount,this.autoinit?this.start():this.paused=!0},counting(t){this.timestamp=t,this.startTimestamp||(this.startTimestamp=t);let o=t-this.startTimestamp;this.remaining=this.currentDuration-o,this.isCountingUp?(this.currentAmount=this.currentStartAmount+(this.endAmount-this.currentStartAmount)*(o/this.currentDuration),this.currentAmount=this.currentAmount>this.endAmount?this.endAmount:this.currentAmount):(this.currentAmount=this.currentStartAmount-(this.currentStartAmount-this.endAmount)*(o/this.currentDuration),this.currentAmount=this.currentAmount<this.endAmount?this.endAmount:this.currentAmount),o<this.currentDuration?this.animationFrame=window.requestAnimationFrame(this.counting):setTimeout(()=>{this.$emit("finished")},1e3)},cancelAnimation(){this.animationFrame&&window.cancelAnimationFrame(this.animationFrame)}}});function ut(t,o,s,a,r,u){return c(),f("span",null,w(t.displayedAmount),1)}G.render=ut;var lt=(()=>{const t=G;return t.install=o=>{o.component("Vue3Autocounter",t)},t})();const dt={__name:"AnimateCounter",props:{counter:{type:Number,required:!0},suffix:{type:String,default:""},prefix:{type:String,default:""},decimals:{type:Number,default:0}},emits:["finished"],setup(t,{emit:o}){const s=t,a=o,r=h(),u=h(),d=k(()=>s.counter);return K(d,(A,_)=>{r.value.reset(),u.value=_,r.value.start()}),(A,_)=>(c(),f(b(lt),{ref_key:"counter",ref:r,startAmount:u.value,endAmount:d.value,duration:1,prefix:t.prefix,suffix:t.suffix,separator:" ",decimalSeparator:",",decimals:t.decimals,autoinit:!0,onFinished:_[0]||(_[0]=x=>a("finished"))},null,8,["startAmount","endAmount","prefix","suffix","decimals"]))}},mt=t=>(L("data-v-e906803a"),t=t(),P(),t),_t=mt(()=>l("div",{class:"subheading font-weight-light text-grey mb-2"}," Статок ",-1)),pt={class:"text-h6 font-weight-light"},vt={__name:"TheWealthChart",setup(t){const o=h(["січ","лют","бер","квіт","трав","черв","лип","сер"]),s=h([200,675,410,390,310,460,250,240]),a=h(!1),r=h(0);E(u);async function u(){a.value=!0;try{const d=await rt.balanceTotal();r.value=d.data.data}finally{a.value=!1}}return(d,A)=>{const _=n("v-sparkline"),x=n("v-sheet"),m=n("v-progress-circular"),p=n("v-fade-transition"),v=n("v-card-text"),S=n("v-card");return c(),f(S,{class:"mt-8 mx-auto overflow-visible","max-width":"400"},{default:i(()=>[e(x,{class:"v-sheet--offset mx-auto",color:"cyan",elevation:"12","max-width":"calc(100% - 32px)",rounded:"lg"},{default:i(()=>[e(_,{"auto-draw":"",labels:o.value,"model-value":s.value,color:"white","line-width":"2",padding:"16"},{label:i(C=>[Q(w(C.value)+". ",1)]),_:1},8,["labels","model-value"])]),_:1}),e(v,{class:"pt-0"},{default:i(()=>[_t,l("div",pt,[e(dt,{counter:r.value,suffix:" ₴"},null,8,["counter"]),e(p,null,{default:i(()=>[a.value?(c(),f(m,{key:0,indeterminate:"",size:20,width:3,class:"ml-4"})):V("",!0)]),_:1})])]),_:1})]),_:1})}}},ht=D(vt,[["__scopeId","data-v-e906803a"]]),ft={class:"d-flex justify-space-between"},gt={class:"text-truncate"},At={__name:"AccountItem",props:{account:{type:Object,required:!0,validator:t=>t instanceof R},icon:String},setup(t){const o=t,s=k(()=>z(o.account.getSum(),{minimumFractionDigits:0}));return(a,r)=>{const u=n("v-avatar"),d=n("v-list-item");return c(),f(d,{to:{name:"accounts.show",params:{id:t.account.id}},class:"s-list-item"},{prepend:i(()=>[e(u,{class:"s-handle-sorting-account-item",icon:t.icon,color:"green"},null,8,["icon"])]),title:i(()=>[l("div",ft,[l("div",gt,w(t.account.name),1),l("div",null,[l("span",null,w(s.value),1)])])]),_:1},8,["to"])}}},xt=D(At,[["__scopeId","data-v-6a6b1879"]]),yt={class:"d-flex w-100 justify-space-between align-center"},bt={class:"s-handle-sorting-account-group"},wt={key:"0"},St={key:"1"},$t={__name:"AccountCategoryItem",props:{category:{type:Object,required:!0,validator:t=>t instanceof $}},setup(t){const o=t,s=k(()=>z(o.category.getSum(),{minimumFractionDigits:0}));return(a,r)=>{const u=n("v-icon"),d=n("v-expansion-panel-title"),A=n("v-list"),_=n("v-expansion-panel-text"),x=n("v-expansion-panel");return c(),f(x,null,{default:i(()=>[e(d,{"hide-actions":"",class:"s-panel-title"},{default:i(({expanded:m})=>[l("div",yt,[l("div",bt,[m?(c(),y("span",wt,[e(u,{icon:"mdi-menu-down"})])):(c(),y("span",St,[e(u,{icon:"mdi-menu-right"})])),l("span",null,w(t.category.name),1)]),l("div",{class:X({"text-grey":m})},[l("span",null,w(s.value),1)],2)])]),_:1}),e(_,{class:"s-custom-expansion-panel-text"},{default:i(()=>[e(A,null,{default:i(()=>[(c(!0),y(F,null,j(t.category.accounts,m=>(c(),f(xt,{key:m.id,account:m,icon:t.category.icon},null,8,["account","icon"]))),128))]),_:1})]),_:1})]),_:1})}}},Ct=D($t,[["__scopeId","data-v-c93a20d9"]]),kt={key:1},It={__name:"TheAccounts",setup(t){const o=O();h([]);const s=k(()=>$.findIn(o.categoriesIds)),a=h(!1);E(async()=>{$.reset(),R.reset(),nt.reset(),await r()});async function r(){a.value=!0;try{const u=await $.loadMainPage();o.categoriesIds=[...u.data.data]}finally{a.value=!1}}return(u,d)=>{const A=n("v-btn"),_=n("v-progress-linear"),x=n("v-expansion-panels");return c(),y("div",null,[e(A,{text:"load",onClick:r,class:"mb-4"}),a.value?(c(),f(_,{key:0,indeterminate:""})):V("",!0),s.value.length?(c(),y("div",kt,[e(x,{multiple:"",modelValue:b(o).accountsPanelModel,"onUpdate:modelValue":d[0]||(d[0]=m=>b(o).accountsPanelModel=m)},{default:i(()=>[(c(!0),y(F,null,j(s.value,m=>(c(),f(Ct,{key:m.id,category:m},null,8,["category"]))),128))]),_:1},8,["modelValue"])])):V("",!0)])}}},Tt=t=>(L("data-v-69c3f97c"),t=t(),P(),t),Vt={class:"text-center mb-4"},Ft={class:"s-card-text-block"},Dt=Tt(()=>l("div",null,"Тип рахунку",-1)),Nt={__name:"TheCreateAccount",emits:["accountSave","dialogClose"],setup(t,{emit:o}){const s=o;at();const a=W(),r=O(),u=h(),{check:d}=it(u),A=[st];async function _(){await d()&&(s("accountSave"),x(),await a.saveAccount())}function x(){const p=a.account.getRelation("category");r.addCategoryId(p)}function m(p){a.createAccountSum(p)}return(p,v)=>{const S=n("v-avatar"),C=n("v-text-field"),I=n("v-divider"),N=n("v-form"),q=n("v-card-text"),U=n("v-spacer"),T=n("v-btn"),M=n("v-card-actions"),B=n("v-card");return c(),f(B,{"prepend-icon":"mdi-credit-card-plus-outline",title:"Додати рахунок"},{default:i(()=>[e(q,null,{default:i(()=>[l("div",Vt,[e(S,{size:"x-large",icon:"mdi-cash",color:"green"})]),b(a).account?(c(),f(N,{key:0,ref_key:"form",ref:u},{default:i(()=>[e(C,{autofocus:"",label:"Назва рахунку",modelValue:b(a).account.name,"onUpdate:modelValue":v[0]||(v[0]=g=>b(a).account.name=g),rules:A},null,8,["modelValue"]),l("div",Ft,[l("div",null,[Dt,l("div",null,w(b(a).account.category.name),1)]),e(I)]),e(ot,{"account-sums":b(a).sums,"is-create-first":!0,onCreatedAccountSum:m},null,8,["account-sums"])]),_:1},512)):V("",!0)]),_:1}),e(I),e(M,null,{default:i(()=>[e(U),e(T,{text:"Відміна",variant:"plain",onClick:v[1]||(v[1]=g=>p.$emit("dialogClose"))}),e(T,{color:"primary",text:"Зберегти",variant:"tonal",onClick:_})]),_:1})]),_:1})}}},qt=D(Nt,[["__scopeId","data-v-69c3f97c"]]),Ut={class:"text-center"},Mt={class:"d-flex flex-column align-center justify-center fill-height"},Bt={class:"text-center"},jt={__name:"TheAddAccount",setup(t){const o=W(),s=h(!1),a=h(!1),r=h(!1),u=h([]),d=k(()=>$.findIn(u.value));async function A(){a.value=!0;try{const p=await $.query().setUpdateMode(et).get();u.value=p.data.data}finally{a.value=!1}}const _=async()=>{Z(d.value)&&await A(),r.value=!0};function x(p){o.resetAccountSum(),o.createAccount(p),s.value=!0}function m(){r.value=!1,s.value=!1}return(p,v)=>{const S=n("v-icon"),C=n("v-btn"),I=n("v-sheet"),N=n("v-col"),q=n("v-row"),U=n("v-container"),T=n("v-card"),M=n("v-bottom-sheet"),B=Y("ripple");return c(),y(F,null,[l("div",Ut,[e(C,{variant:"outlined",loading:a.value,onClick:_},{default:i(()=>[e(S,{icon:"mdi-wallet-plus-outline"})]),_:1},8,["loading"])]),e(M,{modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=g=>r.value=g)},{default:i(()=>[e(T,null,{default:i(()=>[e(U,null,{default:i(()=>[e(q,null,{default:i(()=>[(c(!0),y(F,null,j(d.value,g=>(c(),f(N,{cols:"6"},{default:i(()=>[tt((c(),f(I,{border:"",rounded:"lg",height:"100",class:"w-100 bg-grey-lighten-3",onClick:Lt=>x(g.id)},{default:i(()=>[l("div",Mt,[e(S,{class:"mb-1",icon:g.icon},null,8,["icon"]),l("div",Bt,w(g.name),1)])]),_:2},1032,["onClick"])),[[B]])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ct,{modelValue:s.value,"onUpdate:modelValue":v[2]||(v[2]=g=>s.value=g)},{default:i(()=>[e(qt,{onAccountSave:m,onDialogClose:v[1]||(v[1]=g=>s.value=!1)})]),_:1},8,["modelValue"])],64)}}},Et={class:"pa-2"},Wt={__name:"Index",setup(t){return(o,s)=>(c(),y("div",Et,[e(ht,{class:"mb-5"}),e(It,{class:"mb-5"}),e(jt)]))}};export{Wt as default};
