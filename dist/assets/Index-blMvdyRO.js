import{m as H,o as r,d as g,t as S,j as h,n as I,q as J,s as K,b as x,_ as T,r as n,w as s,k as e,f as Q,a as c,e as j,p as L,g as P,c as y,x as X,F,y as B,z as Y,A as Z,l as z,v as tt,B as et,C as nt,M as at}from"./index-DZ83gzV4.js";import{u as E,a as O,_ as ot}from"./create.store-C8dINBLA.js";import{A as R,t as W,a as C,b as st,u as it}from"./Transaction-_Nn6XxjK.js";import{i as rt}from"./entities-BQdZqXjV.js";import{_ as ct,r as ut,u as lt,a as dt}from"./DialogComponent-CYfPOLwo.js";import"./CurrenciesList-CjQHWWFu.js";/* empty css                                                         */var G=H({name:"Vue3Autocounter",interval:null,props:{startAmount:{type:Number,default:0},endAmount:{type:Number,default:0,required:!0},duration:{type:Number,default:3,validator(t){return t>=1}},autoinit:{type:Boolean,default:!0},prefix:{type:String,default:""},suffix:{type:String,default:""},separator:{type:String,default:","},decimalSeparator:{type:String,default:"."},decimals:{type:Number,default:0,validator(t){return t>=0}}},data(){return{timestamp:0,startTimestamp:0,currentAmount:0,currentStartAmount:0,currentDuration:0,paused:!1,remaining:0,animationFrame:0}},mounted(){this.currentAmount=this.startAmount,this.currentStartAmount=this.startAmount,this.currentDuration=this.duration*1e3,this.remaining=this.duration*1e3,this.autoinit?this.start():this.paused=!0,this.$emit("mounted")},unmounted(){this.cancelAnimation()},watch:{startAmount(){this.reset()},endAmount(){this.reset()},duration(){this.reset()}},computed:{isCountingUp(){return this.endAmount>this.startAmount},displayedAmount(){return`${this.prefix}${this.formatedAmount}${this.suffix}`},formatedAmount(){const t=/(\d+)(\d{3})/;let a=this.currentAmount.toFixed(this.decimals);a+="";let i=a.split("."),o=i[0],l=i.length>1?this.decimalSeparator+i[1]:"",u=!isNaN(parseFloat(this.separator));if(this.separator&&!u)for(;t.test(o);)o=o.replace(t,"$1"+this.separator+"$2");return o+l}},methods:{start(){this.cancelAnimation(),this.currentStartAmount=this.startAmount,this.startTimestamp=null,this.currentDuration=this.duration*1e3,this.paused=!1,this.animationFrame=window.requestAnimationFrame(this.counting)},pause(){this.paused||(this.cancelAnimation(),this.paused=!0)},resume(){this.paused&&(this.startTimestamp=null,this.currentDuration=+this.remaining,this.currentStartAmount=+this.currentAmount,this.animationFrame=window.requestAnimationFrame(this.counting),this.paused=!1)},reset(){this.paused=!1,this.startTimestamp=null,this.cancelAnimation(),this.currentAmount=this.startAmount,this.autoinit?this.start():this.paused=!0},counting(t){this.timestamp=t,this.startTimestamp||(this.startTimestamp=t);let a=t-this.startTimestamp;this.remaining=this.currentDuration-a,this.isCountingUp?(this.currentAmount=this.currentStartAmount+(this.endAmount-this.currentStartAmount)*(a/this.currentDuration),this.currentAmount=this.currentAmount>this.endAmount?this.endAmount:this.currentAmount):(this.currentAmount=this.currentStartAmount-(this.currentStartAmount-this.endAmount)*(a/this.currentDuration),this.currentAmount=this.currentAmount<this.endAmount?this.endAmount:this.currentAmount),a<this.currentDuration?this.animationFrame=window.requestAnimationFrame(this.counting):setTimeout(()=>{this.$emit("finished")},1e3)},cancelAnimation(){this.animationFrame&&window.cancelAnimationFrame(this.animationFrame)}}});function mt(t,a,i,o,l,u){return r(),g("span",null,S(t.displayedAmount),1)}G.render=mt;var _t=(()=>{const t=G;return t.install=a=>{a.component("Vue3Autocounter",t)},t})();const pt={__name:"AnimateCounter",props:{counter:{type:Number,required:!0},suffix:{type:String,default:""},prefix:{type:String,default:""},decimals:{type:Number,default:0}},emits:["finished"],setup(t,{emit:a}){const i=t,o=a,l=h(),u=h(i.counter),m=I(()=>i.counter);return J(m,async(f,p)=>{u.value=p,await K(),l.value.start()}),(f,p)=>(r(),g(x(_t),{ref_key:"counter",ref:l,startAmount:u.value,endAmount:m.value,duration:1,prefix:t.prefix,suffix:t.suffix,separator:" ",decimalSeparator:",",decimals:t.decimals,autoinit:!1,onFinished:p[0]||(p[0]=A=>o("finished"))},null,8,["startAmount","endAmount","prefix","suffix","decimals"]))}},vt=t=>(L("data-v-3a70bfbe"),t=t(),P(),t),ft=vt(()=>c("div",{class:"subheading font-weight-light text-grey mb-2"}," Статок ",-1)),ht={class:"text-h6 font-weight-light"},gt={__name:"TheWealthChart",setup(t){const a=E(),i=h(["січ","лют","бер","квіт","трав","черв","лип","сер"]),o=h([200,675,410,390,310,460,250,240]),l=h(!1);return(u,m)=>{const f=n("v-sparkline"),p=n("v-sheet"),A=n("v-progress-circular"),v=n("v-fade-transition"),d=n("v-card-text"),_=n("v-card");return r(),g(_,{class:"mt-8 mx-auto overflow-visible","max-width":"400"},{default:s(()=>[e(p,{class:"v-sheet--offset mx-auto",color:"cyan",elevation:"12","max-width":"calc(100% - 32px)",rounded:"lg"},{default:s(()=>[e(f,{"auto-draw":"",labels:i.value,"model-value":o.value,color:"white","line-width":"2",padding:"16"},{label:s(w=>[Q(S(w.value)+". ",1)]),_:1},8,["labels","model-value"])]),_:1}),e(d,{class:"pt-0"},{default:s(()=>[ft,c("div",ht,[e(pt,{counter:x(a).amountTotal,suffix:" ₴"},null,8,["counter"]),e(v,null,{default:s(()=>[l.value?(r(),g(A,{key:0,indeterminate:"",size:20,width:3,class:"ml-4"})):j("",!0)]),_:1})])]),_:1})]),_:1})}}},At=T(gt,[["__scopeId","data-v-3a70bfbe"]]),xt={class:"d-flex justify-space-between"},yt={class:"text-truncate"},bt={__name:"AccountItem",props:{account:{type:Object,required:!0,validator:t=>t instanceof R}},setup(t){const a=t,i=I(()=>W(a.account.getSumInMineCurrency(),{minimumFractionDigits:0}));return(o,l)=>{const u=n("v-avatar"),m=n("v-list-item");return r(),g(m,{to:{name:"accounts.show",params:{id:t.account.id}},class:"s-list-item"},{prepend:s(()=>[e(u,{class:"s-handle-sorting-account-item",icon:t.account.getIcon(),color:"green"},null,8,["icon"])]),title:s(()=>[c("div",xt,[c("div",yt,S(t.account.name),1),c("div",null,[c("span",null,S(i.value),1)])])]),_:1},8,["to"])}}},St=T(bt,[["__scopeId","data-v-48e88ffd"]]),wt={class:"d-flex w-100 justify-space-between align-center"},$t={class:"s-handle-sorting-account-group"},Ct={key:"0"},It={key:"1"},Vt={__name:"AccountCategoryItem",props:{category:{type:Object,required:!0,validator:rt}},setup(t){const a=t,i=I(()=>W(a.category.getSumInMineCurrency(),{minimumFractionDigits:0}));return(o,l)=>{const u=n("v-icon"),m=n("v-expansion-panel-title"),f=n("v-list"),p=n("v-expansion-panel-text"),A=n("v-expansion-panel");return r(),g(A,null,{default:s(()=>[e(m,{"hide-actions":"",class:"s-panel-title"},{default:s(({expanded:v})=>[c("div",wt,[c("div",$t,[v?(r(),y("span",Ct,[e(u,{icon:"mdi-menu-down"})])):(r(),y("span",It,[e(u,{icon:"mdi-menu-right"})])),c("span",null,S(t.category.name),1)]),c("div",{class:X({"text-grey":v})},[c("span",null,S(i.value),1)],2)])]),_:1}),e(p,{class:"s-custom-expansion-panel-text"},{default:s(()=>[e(f,null,{default:s(()=>[(r(!0),y(F,null,B(t.category.accounts,v=>(r(),g(St,{key:v.id,account:v},null,8,["account"]))),128))]),_:1})]),_:1})]),_:1})}}},kt=T(Vt,[["__scopeId","data-v-eb76e4d3"]]),Ft={style:{height:"4px"}},Tt={key:0},Dt={__name:"TheAccounts",setup(t){const a=E();h([]);const i=I(()=>C.findIn(a.categoriesIds)),o=h(!1);Y(async()=>{await l()});async function l(){o.value=!0;try{const m=await C.loadMainPage();Z(m.data.data)&&u(),a.categoriesIds=[...m.data.data],a.updateAmountTotal()}finally{o.value=!1}}function u(){C.reset(),R.reset(),st.reset()}return(m,f)=>{const p=n("v-progress-linear"),A=n("v-fade-transition"),v=n("v-expansion-panels");return r(),y("div",null,[c("div",Ft,[e(A,null,{default:s(()=>[z(e(p,{indeterminate:""},null,512),[[tt,o.value]])]),_:1})]),e(A,{mode:"out-in"},{default:s(()=>[i.value.length?(r(),y("div",Tt,[e(v,{multiple:"",modelValue:x(a).accountsPanelModel,"onUpdate:modelValue":f[0]||(f[0]=d=>x(a).accountsPanelModel=d)},{default:s(()=>[(r(!0),y(F,null,B(i.value,d=>(r(),g(kt,{key:d.id,category:d},null,8,["category"]))),128))]),_:1},8,["modelValue"])])):j("",!0)]),_:1})])}}},Nt=t=>(L("data-v-6a66f9d1"),t=t(),P(),t),qt={class:"text-center mb-4"},Mt={class:"s-card-text-block"},Ut=Nt(()=>c("div",null,"Тип рахунку",-1)),jt={__name:"TheCreateAccount",emits:["accountSave","dialogClose"],setup(t,{emit:a}){const i=a;it();const o=O(),l=E(),u=h(),{check:m}=lt(u),f=[ut];async function p(){await m()&&(i("accountSave"),A(),await o.saveAccount())}function A(){const d=o.account.getRelation("category");l.addCategoryId(d)}function v(d){o.createAccountSum(d)}return(d,_)=>{const w=n("v-text-field"),V=n("v-divider"),D=n("v-form"),N=n("v-card-text"),q=n("v-spacer"),k=n("v-btn"),M=n("v-card-actions"),U=n("v-card");return r(),g(U,{"prepend-icon":"mdi-credit-card-plus-outline",title:"Додати рахунок"},{default:s(()=>[e(N,null,{default:s(()=>[c("div",qt,[e(ct,{modelValue:x(o).account.icon,"onUpdate:modelValue":_[0]||(_[0]=$=>x(o).account.icon=$)},null,8,["modelValue"])]),x(o).account?(r(),g(D,{key:0,ref_key:"form",ref:u},{default:s(()=>[e(w,{autofocus:"",label:"Назва рахунку",modelValue:x(o).account.name,"onUpdate:modelValue":_[1]||(_[1]=$=>x(o).account.name=$),rules:f},null,8,["modelValue"]),c("div",Mt,[c("div",null,[Ut,c("div",null,S(x(o).account.category.name),1)]),e(V)]),e(ot,{"account-sums":x(o).sums,"is-create-first":!0,onCreatedAccountSum:v},null,8,["account-sums"])]),_:1},512)):j("",!0)]),_:1}),e(V),e(M,null,{default:s(()=>[e(q),e(k,{text:"Відміна",variant:"plain",onClick:_[2]||(_[2]=$=>d.$emit("dialogClose"))}),e(k,{color:"primary",text:"Зберегти",variant:"tonal",onClick:p})]),_:1})]),_:1})}}},Bt=T(jt,[["__scopeId","data-v-6a66f9d1"]]),Et={class:"text-center"},Lt={class:"d-flex flex-column align-center justify-center fill-height"},Pt={class:"text-center"},zt={__name:"TheAddAccount",setup(t){const a=O(),i=h(!1),o=h(!1),l=h(!1),u=h([]),m=I(()=>C.findIn(u.value));async function f(){o.value=!0;try{const d=await C.query().setUpdateMode(at).get();u.value=d.data.data}finally{o.value=!1}}const p=async()=>{nt(m.value)&&await f(),l.value=!0};function A(d){a.resetAccountSum(),a.createAccount(d),i.value=!0}function v(){l.value=!1,i.value=!1}return(d,_)=>{const w=n("v-icon"),V=n("v-btn"),D=n("v-sheet"),N=n("v-col"),q=n("v-row"),k=n("v-container"),M=n("v-card"),U=n("v-bottom-sheet"),$=et("ripple");return r(),y(F,null,[c("div",Et,[e(V,{variant:"outlined",loading:o.value,onClick:p},{default:s(()=>[e(w,{icon:"mdi-wallet-plus-outline"})]),_:1},8,["loading"])]),e(U,{modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=b=>l.value=b)},{default:s(()=>[e(M,null,{default:s(()=>[e(k,null,{default:s(()=>[e(q,null,{default:s(()=>[(r(!0),y(F,null,B(m.value,b=>(r(),g(N,{cols:"6"},{default:s(()=>[z((r(),g(D,{border:"",rounded:"lg",height:"100",class:"w-100 bg-grey-lighten-3",onClick:Rt=>A(b.id)},{default:s(()=>[c("div",Lt,[e(w,{class:"mb-1",icon:b.icon},null,8,["icon"]),c("div",Pt,S(b.name),1)])]),_:2},1032,["onClick"])),[[$]])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(dt,{modelValue:i.value,"onUpdate:modelValue":_[2]||(_[2]=b=>i.value=b)},{default:s(()=>[e(Bt,{onAccountSave:v,onDialogClose:_[1]||(_[1]=b=>i.value=!1)})]),_:1},8,["modelValue"])],64)}}},Ot={class:"pa-2"},Yt={__name:"Index",setup(t){return(a,i)=>(r(),y("div",Ot,[e(At,{class:"mb-4"}),e(Dt,{class:"mb-5"}),e(zt)]))}};export{Yt as default};
