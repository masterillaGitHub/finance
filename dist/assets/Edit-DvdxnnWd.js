import{u as C}from"./show.store-Cc9f3N65.js";import{_ as h}from"./BottomConfirm-CUm0Hx8F.js";import{i as S,j as u,r as m,o as A,c as V,k as s,w as _,F as x,E,Q as b,n as w,z as k,J as D,d as N}from"./index-DZ83gzV4.js";import{C as v,A as g,e as F,T as I}from"./Transaction-_Nn6XxjK.js";import{f as T,v as r,n as B,j as M,b as P}from"./TheAccountStep.vue_vue_type_style_index_0_scoped_799e84e8_lang-DykuJdKz.js";/* empty css                                                         */const U={__name:"TheAppBar",emits:["removeTransaction"],setup(t,{emit:o}){C();const l=S(),c=o,e=u(!1);function d(){c("removeTransaction"),l.push({name:"transactions.index"})}return(p,n)=>{const i=m("v-btn"),a=m("v-spacer"),f=m("v-app-bar");return A(),V(x,null,[s(f,{elevation:2,density:"compact"},{prepend:_(()=>[s(i,{icon:"mdi-arrow-left",to:{name:"transactions.index"}})]),default:_(()=>[s(a),s(i,{class:"text-red",icon:"mdi-delete-outline",size:"large",variant:"plain",onClick:n[0]||(n[0]=y=>e.value=!0)})]),_:1}),s(h,{modelValue:e.value,"onUpdate:modelValue":n[1]||(n[1]=y=>e.value=y),title:"Видалити?",onSuccess:d},null,8,["modelValue"])],64)}}},O=M(),R=E("transactions/form",{state:()=>({openStep:T,amount:0,currencyId:1,typeId:1,accountId:null,categoryId:null,tagIds:[],date:new Date,toAccountId:null,toCurrencyId:null,toAmount:0,isEnabledValidate:!1}),getters:{getCurrency:t=>v.find(t.currencyId)??null,getToCurrency:t=>v.find(t.toCurrencyId)??null,getType:t=>b.find(o=>o.id===t.typeId)??null,getAccount:t=>g.find(t.accountId)??null,getToAccount:t=>g.find(t.toAccountId)??null,getCategory:t=>F.find(t.categoryId)??null,getDate:t=>O.text(t.date),isValid:t=>r.check(t),isAmountValid:t=>r.amount(t),isAccountValid:t=>r.account(t),isToAccountValid:t=>r.toAccount(t),isCategoryValid:t=>r.category(t)},actions:{nextStep(){B(this)},reset(){this.openStep=T,this.amount=0,this.currencyId=1,this.typeId=1,this.accountId=null,this.categoryId=null,this.tagIds=[],this.date=new Date,this.toCurrencyId=null,this.toAccountId=null,this.toAmount=0,this.isEnabledValidate=!1}}}),J={__name:"Edit",props:{id:{type:[Number,String],required:!0}},setup(t){const o=t;P();const l=R();u(!1);const c=u(),e=u(!1),d=w(()=>I.find(c.value));k(p);async function p(){await n(),l.reset()}async function n(){e.value=!0;try{const a=await I.query().setUpdateMode(D).setParams({include:"currency,type,account,category,to_account,to_currency","filter[id]":o.id}).get();console.log("response",a),c.value=a.data.data[0]}finally{e.value=!1}}const i=()=>{d.value.destroy()};return(a,f)=>(A(),N(U,{onRemoveTransaction:i}))}};export{J as default};
