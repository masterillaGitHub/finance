import{u as S,a as x,b as h}from"./form.store-BS9jCDq-.js";import{_ as w}from"./BottomConfirm-COa7FO5-.js";import{i as C,j as p,r as _,o as g,c as T,k as t,w as f,F as E,n as P,z as D,E as N,N as b,O as A,T as $,P as M,a as I}from"./index-uNLpc8m8.js";import{_ as F,a as V,b as k}from"./TheAmount-BZJLW7Ed.js";import{T as y}from"./entities-DXs83vKd.js";import{u as B}from"./currency_decimal_convert-KKbzYINo.js";import"./CurrenciesList-FRp3ZG6X.js";const O={__name:"TheAppBar",emits:["removeTransaction"],setup(v,{emit:c}){S();const i=C(),u=c,a=p(!1);function o(){u("removeTransaction"),i.push({name:"transactions.index"})}return(l,e)=>{const s=_("v-btn"),m=_("v-spacer"),d=_("v-app-bar");return g(),T(E,null,[t(d,{elevation:2,density:"compact"},{prepend:f(()=>[t(s,{icon:"mdi-arrow-left",to:{name:"transactions.index"}})]),default:f(()=>[t(m),t(s,{class:"text-red",icon:"mdi-delete-outline",size:"large",variant:"plain",onClick:e[0]||(e[0]=r=>a.value=!0)})]),_:1}),t(w,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=r=>a.value=r),title:"Видалити?",onSuccess:o},null,8,["modelValue"])],64)}}},U={class:"fill-height d-flex flex-column"},Y=I("div",{class:"flex-grow-1"},null,-1),K={__name:"Edit",props:{id:{type:[Number,String],required:!0}},setup(v){const c=v,{toMinus:i,toPlus:u}=B(),a=x(),o=p(),l=p(!1),e=P(()=>y.find(o.value));D(s),N(()=>{a.reset()});async function s(){await m(),d()}async function m(){l.value=!0;try{const n=await y.query().setUpdateMode(b).setParams({include:"currency,type,account,category,to_account,to_currency","filter[id]":c.id}).get();console.log("response",n),o.value=n.data.data[0]}finally{l.value=!1}}function d(){a.$patch({openStep:h,amount:r(e.value.amount),currencyId:e.value.getRelation("currency"),typeId:e.value.getRelation("type"),accountId:e.value.getRelation("account"),categoryId:e.value.getRelation("category"),tagIds:[],date:new Date(e.value.transaction_at_timestamp*1e3),toAccountId:e.value.getRelation("to_account"),toCurrencyId:e.value.getRelation("to_currency"),toAmount:e.value.to_amount,transactionId:e.value.id})}const r=n=>{switch(e.value.getRelation("type")){case M:case $:return i(n);case A:return u(n)}},R=()=>{e.value.destroy()};return(n,L)=>(g(),T(E,null,[t(O,{onRemoveTransaction:R}),I("div",U,[Y,t(F),t(V),t(k)])],64))}};export{K as default};
