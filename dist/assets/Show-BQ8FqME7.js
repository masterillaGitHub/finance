import{u as z,a as Q,S as W}from"./form.store-B7goqM2Q.js";import{r as t,o as n,d as i,w as l,j as e,b as p,_ as Y,J as B,m as w,y as O,i as f,c as b,e as g,f as N,t as x,B as P,F as $,a as _,x as j,K as X,h as q,q as Z}from"./index-CMFz-0SU.js";import{t as ee,a as te}from"./Model-CeNXf-rt.js";import{u as ne}from"./currency_decimal_convert-KKbzYINo.js";import{u as oe,t as ae,_ as se,a as ce}from"./collection_service-CPTitLAq.js";import{T as M,A as le}from"./entities-DwYTsaLf.js";import{_ as re}from"./DialogComponent-CBXnObbi.js";import{r as ue,u as ie}from"./form_validate-BGtMXeK9.js";import{a as de,u as _e,_ as me}from"./create.store-CdU_iL2L.js";import{_ as pe}from"./BottomConfirm-Da1d_FVv.js";import{_ as ve}from"./TheCategoryIcon-CKqW0ZH3.js";import"./CurrenciesList-DOV7E-pJ.js";const fe={__name:"TheAppBar",setup(C){const r=z();return(a,s)=>{const o=t("v-btn"),v=t("v-spacer"),m=t("v-app-bar");return n(),i(m,{elevation:2,density:"compact"},{prepend:l(()=>[e(o,{icon:"mdi-arrow-left",to:{name:"accounts.index"}})]),default:l(()=>[e(v),e(o,{icon:"mdi-pencil",onClick:s[0]||(s[0]=c=>p(r).editDialog=!0)})]),_:1})}}},ye={class:"subheading font-weight-light text-grey text-center"},xe={key:0},ge={class:"font-weight-bold text-center"},be={class:"d-flex justify-space-between"},ke={__name:"TheTitleSection",setup(C){const r=B(),a=z(),{toDecimal:s}=ne(),o=w(()=>a.getAccount),v=w(()=>o.value.sums.filter(A=>A.balance!==0)),m=w(()=>v.value.length),c=w(()=>!(m.value===1&&v.value[0].currency.id===1));O(h);const V=f(["січ","лют","бер","квіт","трав","черв","лип","сер"]),T=f([200,675,410,390,310,460,250,240]);async function h(){o.value.exists?a.accountId=r.params.id:await a.loadAccount(r.params.id)}return(A,k)=>{const U=t("v-progress-linear"),L=t("v-sparkline"),D=t("v-sheet"),E=t("v-card-title"),d=t("v-list-item"),u=t("v-list"),R=t("v-card-text"),I=t("v-card");return n(),b("div",null,[p(a).accountLoading?(n(),i(U,{key:0,indeterminate:""})):g("",!0),o.value?(n(),i(I,{key:1,class:"mt-8 mx-auto overflow-visible","max-width":"400",elevation:"0"},{default:l(()=>[e(D,{class:"v-sheet--offset mx-auto",color:"cyan",elevation:"12","max-width":"calc(100% - 32px)",rounded:"lg"},{default:l(()=>[e(L,{"auto-draw":"",labels:V.value,"model-value":T.value,color:"white","line-width":"2",padding:"16"},{label:l(y=>[N(x(y.value)+". ",1)]),_:1},8,["labels","model-value"])]),_:1}),e(E,{class:"text-center"},{default:l(()=>[N(x(o.value.name),1)]),_:1}),e(R,{class:"pt-0"},{default:l(()=>[o.value.place_type===p(P)?(n(),b($,{key:0},[_("div",ye,[k[0]||(k[0]=N(" Поточний баланс")),m.value>1?(n(),b("span",xe,", в "+x(m.value)+" валютах",1)):g("",!0)]),_("div",ge,x(p(ee)(p(s)(o.value.getSumInMineCurrency()))),1),c.value?(n(),i(u,{key:0},{default:l(()=>[(n(!0),b($,null,j(v.value,y=>(n(),i(d,{key:y.id,"prepend-icon":"mdi-flag-outline",class:"s-list-item"},{title:l(()=>[_("div",be,[_("div",null,x(y.currency.name),1),_("div",null,x(p(te)(p(s)(y.balance),y.currency.alphabetic_code)),1)])]),_:2},1024))),128))]),_:1})):g("",!0)],64)):g("",!0)]),_:1})]),_:1})):g("",!0)])}}},Se=Y(ke,[["__scopeId","data-v-a2a449ae"]]),we={__name:"TheTransactions",setup(C){const r=B(),a=oe(),s=w(()=>a.isAccessLazyLoad&&!a.isEmptyData),o=w(()=>ae(M.findLoaded())),v=f(!0),m={"filter[account_id]":r.params.id};O(c),X(()=>{a.reset(),M.reset()});async function c(){a.reset();try{await a.firstLoadTransactions(m)}finally{v.value=!1}}const V=()=>{a.lazyLoadTransactions(m)};return(T,h)=>{const A=t("v-progress-linear"),k=t("v-card-text"),U=t("v-btn"),L=t("v-card-actions"),D=t("v-card"),E=t("v-fade-transition");return n(),i(E,{mode:"out-in"},{default:l(()=>[v.value?(n(),i(A,{key:0,indeterminate:""})):(n(),i(D,{key:1},{default:l(()=>[o.value.length?(n(),i(k,{key:1},{default:l(()=>[(n(!0),b($,null,j(o.value,d=>(n(),i(ce,{key:d.timestamp,group:d},null,8,["group"]))),128)),e(se,{show:90,enable:s.value,onLoad:V},null,8,["enable"])]),_:1})):(n(),b($,{key:0},[e(k,null,{default:l(()=>h[0]||(h[0]=[N(" Покищо транзакцій немає ")])),_:1}),e(L,null,{default:l(()=>[e(U,{"prepend-icon":"mdi-plus",text:"Додати транзакцію",to:{name:"transactions.create"}})]),_:1})],64))]),_:1}))]),_:1})}}},Ce={class:"text-center mb-4"},Te={class:"s-card-text-block"},he={class:"s-card-text-block"},Ae={__name:"TheUpdateAccount",emits:["accountUpdate","dialogClose"],setup(C,{emit:r}){const a=r;de();const s=B(),o=q();_e();const v=f(),m=f(!1);f();const c=f(le.find(s.params.id)),V=f(Z.find(d=>d.value===c.value.place_type).label),T=f(c.value.sums),{check:h}=ie(v),A=[ue];O(()=>{});async function k(){await h()&&(a("accountUpdate"),await L(),await U())}async function U(){await c.value.save({include:"category,sums.currency"})}async function L(){for(const d of T.value)d.account=c.value.id,await d.save({include:"currency"})}function D(){a("dialogClose"),c.value.destroy(),o.push({name:"accounts.index"})}function E(d){T.value.push(d)}return(d,u)=>{const R=t("v-text-field"),I=t("v-divider"),y=t("v-form"),G=t("v-card-text"),F=t("v-btn"),H=t("v-spacer"),J=t("v-card-actions"),K=t("v-card");return n(),i(K,{"prepend-icon":"mdi-credit-card-edit-outline",title:"Редагування рахунку"},{default:l(()=>[c.value?(n(),i(G,{key:0},{default:l(()=>[_("div",Ce,[e(ve,{modelValue:c.value.icon,"onUpdate:modelValue":u[0]||(u[0]=S=>c.value.icon=S)},null,8,["modelValue"])]),e(y,{ref_key:"form",ref:v},{default:l(()=>[e(R,{label:"Назва рахунку",modelValue:c.value.name,"onUpdate:modelValue":u[1]||(u[1]=S=>c.value.name=S),rules:A},null,8,["modelValue"]),_("div",Te,[_("div",null,[u[5]||(u[5]=_("div",null,"Категорія рахунку",-1)),_("div",null,x(c.value.category.name),1)]),e(I)]),_("div",he,[_("div",null,[u[6]||(u[6]=_("div",null,"Тип рахунку",-1)),_("div",null,x(V.value),1)]),e(I)]),c.value.place_type===p(P)?(n(),i(me,{key:0,"account-sums":T.value,onCreatedAccountSum:E},null,8,["account-sums"])):g("",!0)]),_:1},512),e(pe,{modelValue:m.value,"onUpdate:modelValue":u[2]||(u[2]=S=>m.value=S),title:"Видалити?",onSuccess:D},null,8,["modelValue"])]),_:1})):g("",!0),e(I),e(J,null,{default:l(()=>[e(F,{class:"text-red",icon:"mdi-delete-outline",size:"large",variant:"plain",onClick:u[3]||(u[3]=S=>m.value=!0)}),e(H),e(F,{text:"Відміна",size:"large",variant:"plain",onClick:u[4]||(u[4]=S=>d.$emit("dialogClose"))}),e(F,{color:"primary",size:"large",text:"Зберегти",variant:"tonal",onClick:k})]),_:1})]),_:1})}}},$e=Y(Ae,[["__scopeId","data-v-5904c9a0"]]),Ve={__name:"TheEditAccount",setup(C){const r=z();return(a,s)=>(n(),i(re,{modelValue:p(r).editDialog,"onUpdate:modelValue":s[2]||(s[2]=o=>p(r).editDialog=o)},{default:l(()=>[e($e,{onAccountUpdate:s[0]||(s[0]=o=>p(r).editDialog=!1),onDialogClose:s[1]||(s[1]=o=>p(r).editDialog=!1)})]),_:1},8,["modelValue"]))}},Ue={__name:"TheButtonAddTransaction",setup(C){const r=q(),a=B(),s=Q(),o=()=>{s.accountId=parseInt(a.params.id,10),s.openStep=W,r.push({name:"transactions.create"})};return(v,m)=>{const c=t("v-fab");return n(),i(c,{icon:"mdi-plus",app:"",size:"x-large",onClick:o})}}},Ye={__name:"Show",setup(C){const r=z(),a=w(()=>r.getAccount);return(s,o)=>(n(),b($,null,[e(fe),e(Se,{class:"mb-4"}),a.value.place_type===p(P)?(n(),b($,{key:0},[e(we),e(Ue)],64)):g("",!0),e(Ve)],64))}};export{Ye as default};
