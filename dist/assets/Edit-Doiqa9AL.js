import{u as C,f as _,v as s,n as h,j as S}from"./create.store-C0u5qHUL.js";import{_ as V}from"./BottomConfirm-Q9S0wuNy.js";import{i as x,j as u,r as m,o as A,c as E,k as r,w as v,F as w,G as b,Q as k,n as D,z as N,L as F,d as B}from"./index-CsBXRI5z.js";import{C as g,A as I,e as M,T}from"./Transaction-CMZ7FxtM.js";import{u as P}from"./TheAccountStep.vue_vue_type_style_index_0_scoped_799e84e8_lang-BOd2Sfxn.js";/* empty css                                                         */const U={__name:"TheAppBar",emits:["removeTransaction"],setup(t,{emit:o}){C();const l=x(),c=o,e=u(!1);function d(){c("removeTransaction"),l.push({name:"transactions.index"})}return(p,n)=>{const i=m("v-btn"),a=m("v-spacer"),f=m("v-app-bar");return A(),E(w,null,[r(f,{elevation:2,density:"compact"},{prepend:v(()=>[r(i,{icon:"mdi-arrow-left",to:{name:"transactions.index"}})]),default:v(()=>[r(a),r(i,{class:"text-red",icon:"mdi-delete-outline",size:"large",variant:"plain",onClick:n[0]||(n[0]=y=>e.value=!0)})]),_:1}),r(V,{modelValue:e.value,"onUpdate:modelValue":n[1]||(n[1]=y=>e.value=y),title:"Видалити?",onSuccess:d},null,8,["modelValue"])],64)}}},L=S(),O=b("transactions/form",{state:()=>({openStep:_,amount:0,currencyId:1,typeId:1,accountId:null,categoryId:null,tagIds:[],date:new Date,toAccountId:null,toCurrencyId:null,toAmount:0,isEnabledValidate:!1}),getters:{getCurrency:t=>g.find(t.currencyId)??null,getToCurrency:t=>g.find(t.toCurrencyId)??null,getType:t=>k.find(o=>o.id===t.typeId)??null,getAccount:t=>I.find(t.accountId)??null,getToAccount:t=>I.find(t.toAccountId)??null,getCategory:t=>M.find(t.categoryId)??null,getDate:t=>L.text(t.date),isValid:t=>s.check(t),isAmountValid:t=>s.amount(t),isAccountValid:t=>s.account(t),isToAccountValid:t=>s.toAccount(t),isCategoryValid:t=>s.category(t)},actions:{nextStep(){h(this)},reset(){this.openStep=_,this.amount=0,this.currencyId=1,this.typeId=1,this.accountId=null,this.categoryId=null,this.tagIds=[],this.date=new Date,this.toCurrencyId=null,this.toAccountId=null,this.toAmount=0,this.isEnabledValidate=!1}}}),G={__name:"Edit",props:{id:{type:[Number,String],required:!0}},setup(t){const o=t;P();const l=O();u(!1);const c=u(),e=u(!1),d=D(()=>T.find(c.value));N(p);async function p(){await n(),l.reset()}async function n(){e.value=!0;try{const a=await T.query().setUpdateMode(F).setParams({include:"currency,type,account,category,to_account,to_currency","filter[id]":o.id}).get();console.log("response",a),c.value=a.data.data[0]}finally{e.value=!1}}const i=()=>{d.value.destroy()};return(a,f)=>(A(),B(U,{onRemoveTransaction:i}))}};export{G as default};
