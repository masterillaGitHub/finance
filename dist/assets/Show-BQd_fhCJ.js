import{u as N,a as W,S as X}from"./form.store-BMZVePzj.js";import{r as t,o as n,d as u,w as l,k as e,b as _,_ as Y,H as B,n as w,B as O,j as y,c as b,e as h,f as z,t as g,D as M,F as A,a as i,z as j,I as Z,i as H,x as ee,p as te,g as ne}from"./index-CfqXUxnT.js";import{t as oe,c as ae,T as P,A as se}from"./entities-PiLjlfow.js";import{u as ce}from"./currency_decimal_convert-KKbzYINo.js";import{u as le,t as re,_ as ue,a as ie}from"./collection_service-DO8NYliU.js";import{r as _e,u as de,_ as me}from"./DialogComponent-CM3dUN-C.js";import{a as pe,u as ve,_ as fe}from"./create.store-BVGh_LAq.js";import{_ as ye}from"./BottomConfirm-Cnnh2J4K.js";import{_ as xe}from"./TheCategoryIcon-CzCy8ijs.js";import"./CurrenciesList-DVX8b6NS.js";const ge={__name:"TheAppBar",setup(f){const r=N();return(a,s)=>{const o=t("v-btn"),d=t("v-spacer"),m=t("v-app-bar");return n(),u(m,{elevation:2,density:"compact"},{prepend:l(()=>[e(o,{icon:"mdi-arrow-left",to:{name:"accounts.index"}})]),default:l(()=>[e(d),e(o,{icon:"mdi-pencil",onClick:s[0]||(s[0]=c=>_(r).editDialog=!0)})]),_:1})}}},he={class:"subheading font-weight-light text-grey text-center"},be={key:0},Se={class:"font-weight-bold text-center"},ke={class:"d-flex justify-space-between"},we={__name:"TheTitleSection",setup(f){const r=B(),a=N(),{toDecimal:s}=ce(),o=w(()=>a.getAccount),d=w(()=>o.value.sums.filter(S=>S.balance!==0)),m=w(()=>d.value.length),c=w(()=>!(m.value===1&&d.value[0].currency.id===1));O($);const D=y(["січ","лют","бер","квіт","трав","черв","лип","сер"]),C=y([200,675,410,390,310,460,250,240]);async function $(){o.value.exists?a.accountId=r.params.id:await a.loadAccount(r.params.id)}return(S,E)=>{const V=t("v-progress-linear"),I=t("v-sparkline"),U=t("v-sheet"),T=t("v-card-title"),v=t("v-list-item"),p=t("v-list"),R=t("v-card-text"),L=t("v-card");return n(),b("div",null,[_(a).accountLoading?(n(),u(V,{key:0,indeterminate:""})):h("",!0),o.value?(n(),u(L,{key:1,class:"mt-8 mx-auto overflow-visible","max-width":"400",elevation:"0"},{default:l(()=>[e(U,{class:"v-sheet--offset mx-auto",color:"cyan",elevation:"12","max-width":"calc(100% - 32px)",rounded:"lg"},{default:l(()=>[e(I,{"auto-draw":"",labels:D.value,"model-value":C.value,color:"white","line-width":"2",padding:"16"},{label:l(x=>[z(g(x.value)+". ",1)]),_:1},8,["labels","model-value"])]),_:1}),e(T,{class:"text-center"},{default:l(()=>[z(g(o.value.name),1)]),_:1}),e(R,{class:"pt-0"},{default:l(()=>[o.value.place_type===_(M)?(n(),b(A,{key:0},[i("div",he,[z(" Поточний баланс"),m.value>1?(n(),b("span",be,", в "+g(m.value)+" валютах",1)):h("",!0)]),i("div",Se,g(_(oe)(_(s)(o.value.getSumInMineCurrency()))),1),c.value?(n(),u(p,{key:0},{default:l(()=>[(n(!0),b(A,null,j(d.value,x=>(n(),u(v,{key:x.id,"prepend-icon":"mdi-flag-outline",class:"s-list-item"},{title:l(()=>[i("div",ke,[i("div",null,g(x.currency.name),1),i("div",null,g(_(ae)(_(s)(x.balance),x.currency.alphabetic_code)),1)])]),_:2},1024))),128))]),_:1})):h("",!0)],64)):h("",!0)]),_:1})]),_:1})):h("",!0)])}}},Ce=Y(we,[["__scopeId","data-v-a2a449ae"]]),Te={__name:"TheTransactions",setup(f){const r=B(),a=le(),s=w(()=>a.isAccessLazyLoad&&!a.isEmptyData),o=w(()=>re(P.findLoaded())),d=y(!0);O(m),Z(()=>{a.reset(),P.reset()});async function m(){a.reset();try{await a.firstLoadTransactions({"filter[account_id]":r.params.id})}finally{d.value=!1}}const c=()=>{a.lazyLoadTransactions({"filter[account_id]":r.params.id})};return(D,C)=>{const $=t("v-progress-linear"),S=t("v-card-text"),E=t("v-btn"),V=t("v-card-actions"),I=t("v-card"),U=t("v-fade-transition");return n(),u(U,{mode:"out-in"},{default:l(()=>[d.value?(n(),u($,{key:0,indeterminate:""})):(n(),u(I,{key:1},{default:l(()=>[o.value.length?(n(),u(S,{key:1},{default:l(()=>[(n(!0),b(A,null,j(o.value,T=>(n(),u(ie,{key:T.timestamp,group:T},null,8,["group"]))),128)),e(ue,{show:90,enable:s.value,onLoad:c},null,8,["enable"])]),_:1})):(n(),b(A,{key:0},[e(S,null,{default:l(()=>[z(" Покищо транзакцій немає ")]),_:1}),e(V,null,{default:l(()=>[e(E,{"prepend-icon":"mdi-plus",text:"Додати транзакцію",to:{name:"transactions.create"}})]),_:1})],64))]),_:1}))]),_:1})}}},q=f=>(te("data-v-5904c9a0"),f=f(),ne(),f),Ae={class:"text-center mb-4"},$e={class:"s-card-text-block"},Ve=q(()=>i("div",null,"Категорія рахунку",-1)),Ie={class:"s-card-text-block"},Ue=q(()=>i("div",null,"Тип рахунку",-1)),Le={__name:"TheUpdateAccount",emits:["accountUpdate","dialogClose"],setup(f,{emit:r}){const a=r;pe();const s=B(),o=H();ve();const d=y(),m=y(!1);y();const c=y(se.find(s.params.id)),D=y(ee.find(v=>v.value===c.value.place_type).label),C=y(c.value.sums),{check:$}=de(d),S=[_e];O(()=>{});async function E(){await $()&&(a("accountUpdate"),await I(),await V())}async function V(){await c.value.save({include:"category,sums.currency"})}async function I(){for(const v of C.value)v.account=c.value.id,await v.save({include:"currency"})}function U(){a("dialogClose"),c.value.destroy(),o.push({name:"accounts.index"})}function T(v){C.value.push(v)}return(v,p)=>{const R=t("v-text-field"),L=t("v-divider"),x=t("v-form"),G=t("v-card-text"),F=t("v-btn"),J=t("v-spacer"),K=t("v-card-actions"),Q=t("v-card");return n(),u(Q,{"prepend-icon":"mdi-credit-card-edit-outline",title:"Редагування рахунку"},{default:l(()=>[c.value?(n(),u(G,{key:0},{default:l(()=>[i("div",Ae,[e(xe,{modelValue:c.value.icon,"onUpdate:modelValue":p[0]||(p[0]=k=>c.value.icon=k)},null,8,["modelValue"])]),e(x,{ref_key:"form",ref:d},{default:l(()=>[e(R,{label:"Назва рахунку",modelValue:c.value.name,"onUpdate:modelValue":p[1]||(p[1]=k=>c.value.name=k),rules:S},null,8,["modelValue"]),i("div",$e,[i("div",null,[Ve,i("div",null,g(c.value.category.name),1)]),e(L)]),i("div",Ie,[i("div",null,[Ue,i("div",null,g(D.value),1)]),e(L)]),c.value.place_type===_(M)?(n(),u(fe,{key:0,"account-sums":C.value,onCreatedAccountSum:T},null,8,["account-sums"])):h("",!0)]),_:1},512),e(ye,{modelValue:m.value,"onUpdate:modelValue":p[2]||(p[2]=k=>m.value=k),title:"Видалити?",onSuccess:U},null,8,["modelValue"])]),_:1})):h("",!0),e(L),e(K,null,{default:l(()=>[e(F,{class:"text-red",icon:"mdi-delete-outline",size:"large",variant:"plain",onClick:p[3]||(p[3]=k=>m.value=!0)}),e(J),e(F,{text:"Відміна",size:"large",variant:"plain",onClick:p[4]||(p[4]=k=>v.$emit("dialogClose"))}),e(F,{color:"primary",size:"large",text:"Зберегти",variant:"tonal",onClick:E})]),_:1})]),_:1})}}},De=Y(Le,[["__scopeId","data-v-5904c9a0"]]),Ee={__name:"TheEditAccount",setup(f){const r=N();return(a,s)=>(n(),u(me,{modelValue:_(r).editDialog,"onUpdate:modelValue":s[2]||(s[2]=o=>_(r).editDialog=o)},{default:l(()=>[e(De,{onAccountUpdate:s[0]||(s[0]=o=>_(r).editDialog=!1),onDialogClose:s[1]||(s[1]=o=>_(r).editDialog=!1)})]),_:1},8,["modelValue"]))}},ze={__name:"TheButtonAddTransaction",setup(f){const r=H(),a=B(),s=W(),o=()=>{s.accountId=parseInt(a.params.id,10),s.openStep=X,r.push({name:"transactions.create"})};return(d,m)=>{const c=t("v-fab");return n(),u(c,{icon:"mdi-plus",app:"",size:"x-large",onClick:o})}}},qe={__name:"Show",setup(f){const r=N(),a=w(()=>r.getAccount);return(s,o)=>(n(),b(A,null,[e(ge),e(Ce,{class:"mb-4"}),a.value.place_type===_(M)?(n(),b(A,{key:0},[e(Te),e(ze)],64)):h("",!0),e(Ee)],64))}};export{qe as default};
