import{_ as W}from"./FullscreenAppBar-CQJdm1ir.js";import{g as U,j as z,k as ee}from"./entities-BlY9GNkC.js";import{G as te,a3 as I,r as a,o as s,d as v,b as m,w as l,k as e,U as ie,a as D,t as P,c as f,F as x,z as T,n as V,$ as E,f as M,e as q,_ as B,Y as L,Z as F,j,X as ae,x as oe}from"./index-C54BZKKw.js";import{r as ne,u as le,_ as O}from"./DialogComponent-eaOeCqVp.js";import{_ as se}from"./BottomConfirm-lQyewIQK.js";const C=te("settings/categories",{state:()=>({categoryLoading:!1,editCategory:null,editDialog:!1,storeDialog:!1,currentTab:I,categoryIds:[]}),getters:{categories:i=>U.findIn(i.categoryIds)},actions:{async loadCategories(){console.log("load categories"),this.categoryLoading=!0;try{this.categoryIds=await U.sync({include:"children.parent,parent","filter[user_id]":"auth"})}finally{this.categoryLoading=!1}},async saveCategory(i){await i.save()},setNewCategory(){const i=new U;i.type=this.currentTab,this.editCategory=i,this.storeDialog=!0},setEditCategory(i){this.editCategory=i,this.editDialog=!0},closeDialog(){this.editDialog=!1,this.storeDialog=!1,setTimeout(()=>{this.editCategory=!1},1e3)}}}),Y={__name:"CategoryItem",props:{category:{type:Object,required:!0,validator:z}},setup(i){const t=C();return(u,o)=>{const n=a("v-list-item");return s(),v(n,{"prepend-icon":i.category.icon,title:i.category.name,onClick:o[0]||(o[0]=d=>m(t).setEditCategory(i.category))},null,8,["prepend-icon","title"])}}},de={__name:"CategoryItemGroup",props:{category:{type:Object,required:!0,validator:z}},setup(i){const t=C();return(u,o)=>{const n=a("v-badge"),d=a("v-list-item-title"),_=a("v-btn"),r=a("v-list-item"),g=a("v-list-group");return s(),v(g,null,{activator:l(({props:p})=>[e(r,{"prepend-icon":i.category.icon,onClick:o[0]||(o[0]=y=>m(t).setEditCategory(i.category))},{append:l(({isActive:y})=>[e(_,ie(p,{icon:y?"mdi-chevron-up":"mdi-chevron-down",variant:"text"}),null,16,["icon"])]),default:l(()=>[e(d,null,{default:l(()=>[D("span",null,P(i.category.name),1),e(n,{content:i.category.childrenCount(),inline:"",color:"transparent"},null,8,["content"])]),_:1})]),_:2},1032,["prepend-icon"])]),default:l(()=>[(s(!0),f(x,null,T(i.category.children,p=>(s(),v(Y,{key:p.id,category:p},null,8,["category"]))),128))]),_:1})}}},N={__name:"CategoryList",props:{categories:{type:Array,default:()=>[],validator:ee}},setup(i){return(t,u)=>{const o=a("v-list");return s(),v(o,null,{default:l(()=>[(s(!0),f(x,null,T(i.categories,n=>(s(),f(x,{key:n.id},[n.isChildren()?(s(),v(de,{key:0,category:n},null,8,["category"])):(s(),v(Y,{key:1,category:n},null,8,["category"]))],64))),128))]),_:1})}}},re={class:"pa-2"},ce={__name:"CategoryListTabs",setup(i){const t=C(),u=V(()=>t.categories.filter(n=>n.type_id===I)),o=V(()=>t.categories.filter(n=>n.type_id===E));return(n,d)=>{const _=a("v-tab"),r=a("v-tabs"),g=a("v-card"),p=a("v-tabs-window-item"),y=a("v-tabs-window"),$=a("v-fade-transition");return s(),f(x,null,[D("div",re,[e(g,{loading:m(t).categoryLoading},{default:l(()=>[e(r,{modelValue:m(t).currentTab,"onUpdate:modelValue":d[0]||(d[0]=k=>m(t).currentTab=k),grow:""},{default:l(()=>[e(_,{value:m(I)},{default:l(()=>[M("Витрати")]),_:1},8,["value"]),e(_,{value:m(E)},{default:l(()=>[M("Доходи")]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1},8,["loading"])]),e($,null,{default:l(()=>[m(t).categories.length?(s(),v(g,{key:0},{default:l(()=>[e(y,{modelValue:m(t).currentTab,"onUpdate:modelValue":d[1]||(d[1]=k=>m(t).currentTab=k)},{default:l(()=>[e(p,{value:m(I)},{default:l(()=>[e(N,{categories:u.value},null,8,["categories"])]),_:1},8,["value"]),e(p,{value:m(E)},{default:l(()=>[e(N,{categories:o.value},null,8,["categories"])]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})):q("",!0)]),_:1})],64)}}},me=[{title:"Банкінг",icons:["mdi-account-cash","mdi-account-cash-outline","mdi-account-credit-card","mdi-account-credit-card-outline","mdi-bank","mdi-bank-check","mdi-bank-circle","mdi-bank-circle-outline","mdi-bank-minus","mdi-bank-off","mdi-bank-off-outline","mdi-bank-outline","mdi-bank-plus","mdi-bank-remove","mdi-bank-transfer","mdi-bank-transfer-in","mdi-bank-transfer-out","mdi-bitcoin","mdi-cash","mdi-cash-100","mdi-cash-check","mdi-cash-clock","mdi-cash-edit","mdi-cash-fast","mdi-cash-lock","mdi-cash-lock-open","mdi-cash-marker","mdi-cash-minus","mdi-cash-multiple","mdi-cash-off","mdi-cash-plus","mdi-cash-refund","mdi-cash-register","mdi-cash-remove","mdi-cash-sync","mdi-checkbook","mdi-checkbook-arrow-left","mdi-checkbook-arrow-right","mdi-circle-multiple","mdi-circle-multiple-outline","mdi-credit-card","mdi-credit-card-check","mdi-credit-card-check-outline","mdi-credit-card-chip","mdi-credit-card-chip-outline","mdi-credit-card-clock","mdi-credit-card-clock-outline","mdi-credit-card-edit"]},{title:"Одяг",icons:["mdi-bow-tie","mdi-chef-hat","mdi-coat-rack","mdi-diaper-outline","mdi-face-mask","mdi-face-mask-outline","mdi-glasses","mdi-hanger","mdi-hard-hat","mdi-hat-fedora","mdi-iron","mdi-iron-board","mdi-iron-outline","mdi-lingerie","mdi-necklace","mdi-shoe-ballet","mdi-shoe-cleat","mdi-shoe-formal","mdi-shoe-heel","mdi-shoe-sneaker","mdi-sunglasses","mdi-tie","mdi-tshirt-crew","mdi-tshirt-crew-outline","mdi-tshirt-v","mdi-tshirt-v-outline","mdi-underwear-outline","mdi-wizard-hat"]},{title:"Тварини",icons:["mdi-bat","mdi-bee","mdi-bird","mdi-bone","mdi-bone-off","mdi-bug","mdi-bug-check","mdi-bug-check-outline","mdi-bug-outline","mdi-butterfly","mdi-butterfly-outline","mdi-cat","mdi-cow","mdi-cow-off","mdi-dog","mdi-dog-service","mdi-dog-side","mdi-dog-side-off","mdi-dolphin","mdi-donkey","mdi-duck","mdi-elephant","mdi-fish","mdi-fishbowl","mdi-fishbowl-outline","mdi-google-downasaur","mdi-horse","mdi-horse-variant","mdi-horse-variant-fast","mdi-jellyfish","mdi-jellyfish-outline","mdi-kangaroo","mdi-koala","mdi-linux","mdi-owl","mdi-panda","mdi-paw","mdi-paw-off","mdi-paw-off-outline","mdi-paw-outline","mdi-penguin","mdi-pig","mdi-pig-variant","mdi-pig-variant-outline","mdi-rabbit","mdi-rabbit-variant","mdi-rabbit-variant-outline","mdi-rodent","mdi-shark","mdi-shark-fin","mdi-shark-fin-outline","mdi-shark-off","mdi-sheep","mdi-snail","mdi-snake","mdi-spider","mdi-spider-outline","mdi-spider-thread","mdi-tortoise","mdi-turkey","mdi-turtle","mdi-unicorn","mdi-unicorn-variant"]}],ue={class:"text-subtitle-1"},_e={class:"d-flex justify-space-evenly flex-wrap"},pe={__name:"ChoiceIcons",props:{iconSelect:{type:String,default:null}},emits:{update:String},setup(i,{emit:t}){const u=i,o=t,n=d=>d===u.iconSelect;return(d,_)=>{const r=a("v-btn");return s(),f("div",null,[(s(!0),f(x,null,T(m(me),g=>(s(),f("div",{key:g.title,class:"s-icons-wrapper"},[D("div",ue,P(g.title),1),D("div",_e,[(s(!0),f(x,null,T(g.icons,p=>(s(),v(r,{active:n(p),variant:"text",key:p,class:"ma-1",icon:p,onClick:y=>o("update",p)},null,8,["active","icon","onClick"]))),128))])]))),128))])}}},ve=B(pe,[["__scopeId","data-v-0e2822b1"]]),ge={__name:"DialogChoiceIcons",props:L({iconSelect:{type:String,default:null}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:L({update:String},["update:modelValue"]),setup(i,{emit:t}){const u=t,o=F(i,"modelValue"),n=d=>{u("update",d),o.value=!1};return(d,_)=>{const r=a("v-card-title"),g=a("v-card-text"),p=a("v-btn"),y=a("v-card-actions"),$=a("v-card"),k=a("v-dialog");return s(),v(k,{modelValue:o.value,"onUpdate:modelValue":_[2]||(_[2]=w=>o.value=w),scrollable:""},{default:l(()=>[e($,null,{default:l(()=>[e(r,null,{default:l(()=>[M("Оберіть іконку")]),_:1}),e(g,{class:"s-card-text"},{default:l(()=>[e(ve,{"icon-select":i.iconSelect,onUpdate:_[0]||(_[0]=w=>n(w))},null,8,["icon-select"])]),_:1}),e(y,{class:"justify-center"},{default:l(()=>[e(p,{block:"",text:"Відміна",size:"large",variant:"plain",onClick:_[1]||(_[1]=w=>o.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},fe=B(ge,[["__scopeId","data-v-736776de"]]),ye={__name:"TheCategoryIcon",props:{modelValue:{type:String,default:"mdi-help"},modelModifiers:{}},emits:["update:modelValue"],setup(i){const t=F(i,"modelValue"),u=j(!1),o=n=>{t.value=n};return(n,d)=>{const _=a("v-avatar");return s(),f("div",null,[e(_,{size:"x-large",icon:t.value,color:"green",onClick:d[0]||(d[0]=r=>u.value=!0)},null,8,["icon"]),e(fe,{modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=r=>u.value=r),onUpdate:o},null,8,["modelValue"])])}}},be={class:"text-center mb-4"},A={__name:"TheFormCategory",props:{title:{type:String,required:!0}},setup(i){const t=C(),u=j(),o={name:"Немає",id:null},n=V(()=>!!r.value.exists),d=V({get:()=>{var b;return(b=r.value.parent)!=null&&b.exists?r.value.parent:o},set:b=>r.value.parent=b}),_=j(!1),r=V(()=>t.editCategory),g=V($),{check:p}=le(u),y=[ne];function $(){const b=t.categories.filter(c=>c.type_id===t.currentTab).filter(c=>c.id!==r.value.id).map(c=>({name:c.name,id:c.id}));return b.unshift(o),b}async function k(){await p()&&(t.closeDialog(),await t.saveCategory(r.value),await t.loadCategories())}function w(){t.closeDialog(),r.value.destroy()}return(b,c)=>{const G=a("v-text-field"),X=a("v-select"),R=a("v-form"),Z=a("v-card-text"),H=a("v-divider"),S=a("v-btn"),J=a("v-spacer"),K=a("v-card-actions"),Q=a("v-card");return s(),v(Q,{"prepend-icon":"mdi-credit-card-edit-outline",title:i.title},{default:l(()=>[e(Z,null,{default:l(()=>[D("div",be,[e(ye,{modelValue:r.value.icon,"onUpdate:modelValue":c[0]||(c[0]=h=>r.value.icon=h)},null,8,["modelValue"])]),e(R,{onSubmit:ae(k,["prevent"]),ref_key:"form",ref:u},{default:l(()=>[e(G,{label:"Назва категорії",modelValue:r.value.name,"onUpdate:modelValue":c[1]||(c[1]=h=>r.value.name=h),rules:y,autofocus:!n.value},null,8,["modelValue","autofocus"]),e(X,{modelValue:d.value,"onUpdate:modelValue":c[2]||(c[2]=h=>d.value=h),label:"Батьківська категорія",items:g.value,"item-title":"name","item-value":"id"},null,8,["modelValue","items"])]),_:1},512),e(se,{modelValue:_.value,"onUpdate:modelValue":c[3]||(c[3]=h=>_.value=h),title:"Видалити?",onSuccess:w},null,8,["modelValue"])]),_:1}),e(H),e(K,null,{default:l(()=>[n.value?(s(),v(S,{key:0,class:"text-red",icon:"mdi-delete-outline",variant:"plain",onClick:c[4]||(c[4]=h=>_.value=!0)})):q("",!0),e(J),e(S,{text:"Відміна",size:"large",variant:"plain",onClick:c[5]||(c[5]=h=>m(t).closeDialog())}),e(S,{size:"large",color:"primary",text:"Зберегти",variant:"tonal",onClick:k})]),_:1})]),_:1},8,["title"])}}},he={__name:"TheCategoryEdit",setup(i){const t=C();return(u,o)=>(s(),v(O,{modelValue:m(t).editDialog,"onUpdate:modelValue":o[0]||(o[0]=n=>m(t).editDialog=n)},{default:l(()=>[e(A,{title:"Редагування категорії"})]),_:1},8,["modelValue"]))}},ke={__name:"TheCategoryCreate",setup(i){const t=C();return(u,o)=>(s(),v(O,{modelValue:m(t).storeDialog,"onUpdate:modelValue":o[0]||(o[0]=n=>m(t).storeDialog=n)},{default:l(()=>[e(A,{title:"Нова категорія"})]),_:1},8,["modelValue"]))}},Ce={class:""},Ie={__name:"Index",setup(i){const t=C();return oe(async()=>{await t.loadCategories()}),(u,o)=>{const n=a("v-btn");return s(),f("div",Ce,[e(W,{"path-name":"settings.index",title:"Категорії"},{default:l(()=>[e(n,{icon:"mdi-plus",onClick:o[0]||(o[0]=d=>m(t).setNewCategory())})]),_:1}),e(ce),e(ke),e(he)])}}};export{Ie as default};
