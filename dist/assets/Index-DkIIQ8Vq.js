import{m as Q,o as c,d as A,t as $,j as g,n as T,q as Z,s as tt,b as p,_ as N,r as a,w as s,k as e,f as et,a as r,e as D,p as O,g as R,A as z,c as x,x as Y,y as nt,F,z as L,B as at,C as ot,l as G,v as st,D as it,E as ct,G as rt,M as ut}from"./index-CxbfblZZ.js";import{u as j,a as W,_ as lt}from"./create.store-PD5BznbF.js";import{u as B}from"./currency_decimal_convert-KKbzYINo.js";import{A as H,t as X,i as dt,a as k,b as mt,u as _t}from"./entities-CNJ8_7LR.js";import{_ as pt,r as vt,u as ht,a as ft}from"./DialogComponent-DLV67brD.js";import"./CurrenciesList-DDLXAnUF.js";var J=Q({name:"Vue3Autocounter",interval:null,props:{startAmount:{type:Number,default:0},endAmount:{type:Number,default:0,required:!0},duration:{type:Number,default:3,validator(t){return t>=1}},autoinit:{type:Boolean,default:!0},prefix:{type:String,default:""},suffix:{type:String,default:""},separator:{type:String,default:","},decimalSeparator:{type:String,default:"."},decimals:{type:Number,default:0,validator(t){return t>=0}}},data(){return{timestamp:0,startTimestamp:0,currentAmount:0,currentStartAmount:0,currentDuration:0,paused:!1,remaining:0,animationFrame:0}},mounted(){this.currentAmount=this.startAmount,this.currentStartAmount=this.startAmount,this.currentDuration=this.duration*1e3,this.remaining=this.duration*1e3,this.autoinit?this.start():this.paused=!0,this.$emit("mounted")},unmounted(){this.cancelAnimation()},watch:{startAmount(){this.reset()},endAmount(){this.reset()},duration(){this.reset()}},computed:{isCountingUp(){return this.endAmount>this.startAmount},displayedAmount(){return`${this.prefix}${this.formatedAmount}${this.suffix}`},formatedAmount(){const t=/(\d+)(\d{3})/;let o=this.currentAmount.toFixed(this.decimals);o+="";let i=o.split("."),n=i[0],l=i.length>1?this.decimalSeparator+i[1]:"",m=!isNaN(parseFloat(this.separator));if(this.separator&&!m)for(;t.test(n);)n=n.replace(t,"$1"+this.separator+"$2");return n+l}},methods:{start(){this.cancelAnimation(),this.currentStartAmount=this.startAmount,this.startTimestamp=null,this.currentDuration=this.duration*1e3,this.paused=!1,this.animationFrame=window.requestAnimationFrame(this.counting)},pause(){this.paused||(this.cancelAnimation(),this.paused=!0)},resume(){this.paused&&(this.startTimestamp=null,this.currentDuration=+this.remaining,this.currentStartAmount=+this.currentAmount,this.animationFrame=window.requestAnimationFrame(this.counting),this.paused=!1)},reset(){this.paused=!1,this.startTimestamp=null,this.cancelAnimation(),this.currentAmount=this.startAmount,this.autoinit?this.start():this.paused=!0},counting(t){this.timestamp=t,this.startTimestamp||(this.startTimestamp=t);let o=t-this.startTimestamp;this.remaining=this.currentDuration-o,this.isCountingUp?(this.currentAmount=this.currentStartAmount+(this.endAmount-this.currentStartAmount)*(o/this.currentDuration),this.currentAmount=this.currentAmount>this.endAmount?this.endAmount:this.currentAmount):(this.currentAmount=this.currentStartAmount-(this.currentStartAmount-this.endAmount)*(o/this.currentDuration),this.currentAmount=this.currentAmount<this.endAmount?this.endAmount:this.currentAmount),o<this.currentDuration?this.animationFrame=window.requestAnimationFrame(this.counting):setTimeout(()=>{this.$emit("finished")},1e3)},cancelAnimation(){this.animationFrame&&window.cancelAnimationFrame(this.animationFrame)}}});function At(t,o,i,n,l,m){return c(),A("span",null,$(t.displayedAmount),1)}J.render=At;var gt=(()=>{const t=J;return t.install=o=>{o.component("Vue3Autocounter",t)},t})();const yt={__name:"AnimateCounter",props:{counter:{type:Number,required:!0},suffix:{type:String,default:""},prefix:{type:String,default:""},decimals:{type:Number,default:0}},emits:["finished"],setup(t,{emit:o}){const i=t,n=o,l=g(),m=g(i.counter),d=T(()=>i.counter);return Z(d,async(v,h)=>{m.value=h,await tt(),l.value.start()}),(v,h)=>(c(),A(p(gt),{ref_key:"counter",ref:l,startAmount:m.value,endAmount:d.value,duration:1,prefix:t.prefix,suffix:t.suffix,separator:" ",decimalSeparator:",",decimals:t.decimals,autoinit:!1,onFinished:h[0]||(h[0]=y=>n("finished"))},null,8,["startAmount","endAmount","prefix","suffix","decimals"]))}},xt=t=>(O("data-v-4083970f"),t=t(),R(),t),bt=xt(()=>r("div",{class:"subheading font-weight-light text-grey mb-2"}," Статок ",-1)),St={class:"text-h6 font-weight-light"},$t={__name:"TheWealthChart",setup(t){const o=j(),{toDecimal:i}=B(),n=g(["січ","лют","бер","квіт","трав","черв","лип","сер"]),l=g([200,675,410,390,310,460,250,240]),m=g(!1),d=T(()=>i(o.amountTotal));return(v,h)=>{const y=a("v-sparkline"),S=a("v-sheet"),u=a("v-progress-circular"),_=a("v-fade-transition"),f=a("v-card-text"),V=a("v-card");return c(),A(V,{class:"mt-8 mx-auto overflow-visible","max-width":"400"},{default:s(()=>[e(S,{class:"v-sheet--offset mx-auto",color:"cyan",elevation:"12","max-width":"calc(100% - 32px)",rounded:"lg"},{default:s(()=>[e(y,{"auto-draw":"",labels:n.value,"model-value":l.value,color:"white","line-width":"2",padding:"16"},{label:s(w=>[et($(w.value)+". ",1)]),_:1},8,["labels","model-value"])]),_:1}),e(f,{class:"pt-0"},{default:s(()=>[bt,r("div",St,[e(yt,{counter:d.value,suffix:" ₴"},null,8,["counter"]),e(_,null,{default:s(()=>[m.value?(c(),A(u,{key:0,indeterminate:"",size:20,width:3,class:"ml-4"})):D("",!0)]),_:1})])]),_:1})]),_:1})}}},wt=N($t,[["__scopeId","data-v-4083970f"]]),Ct={class:"d-flex justify-space-between"},Tt={class:"text-truncate"},Vt={class:"ml-2"},kt={key:0},It={key:1},Dt={__name:"AccountItem",props:{account:{type:Object,required:!0,validator:t=>t instanceof H}},setup(t){const o=t,{toDecimal:i}=B(),n=T(()=>X(i(o.account.getSumInMineCurrency()),{maximumFractionDigits:0}));return(l,m)=>{const d=a("v-avatar"),v=a("v-list-item");return c(),A(v,{to:{name:"accounts.show",params:{id:t.account.id}},class:"s-list-item"},{prepend:s(()=>[e(d,{class:"s-handle-sorting-account-item",icon:t.account.icon,color:"green"},null,8,["icon"])]),title:s(()=>[r("div",Ct,[r("div",Tt,$(t.account.name),1),r("div",Vt,[t.account.place_type===p(z)?(c(),x("span",kt,$(p(Y)[1].label),1)):(c(),x("span",It,$(n.value),1))])])]),_:1},8,["to"])}}},Ft=N(Dt,[["__scopeId","data-v-84fa44fe"]]),Nt={class:"d-flex w-100 justify-space-between align-center"},Ut={class:"s-handle-sorting-account-group"},Et={key:"0"},qt={key:"1"},Mt={__name:"AccountCategoryItem",props:{category:{type:Object,required:!0,validator:dt}},setup(t){const o=t,{toDecimal:i}=B(),n=T(()=>X(i(o.category.getSumInMineCurrency()),{maximumFractionDigits:0}));return(l,m)=>{const d=a("v-icon"),v=a("v-expansion-panel-title"),h=a("v-list"),y=a("v-expansion-panel-text"),S=a("v-expansion-panel");return c(),A(S,null,{default:s(()=>[e(v,{"hide-actions":"",class:"s-panel-title"},{default:s(({expanded:u})=>[r("div",Nt,[r("div",Ut,[u?(c(),x("span",Et,[e(d,{icon:"mdi-menu-down"})])):(c(),x("span",qt,[e(d,{icon:"mdi-menu-right"})])),r("span",null,$(t.category.name),1)]),r("div",{class:nt({"text-grey":u})},[r("span",null,$(n.value),1)],2)])]),_:1}),e(y,{class:"s-custom-expansion-panel-text"},{default:s(()=>[e(h,null,{default:s(()=>[(c(!0),x(F,null,L(t.category.accounts,u=>(c(),A(Ft,{key:u.id,account:u},null,8,["account"]))),128))]),_:1})]),_:1})]),_:1})}}},Pt=N(Mt,[["__scopeId","data-v-505d6249"]]),Lt={style:{height:"4px"}},jt={key:0},Bt={__name:"TheAccounts",setup(t){const o=j();g([]);const i=T(()=>k.findIn(o.categoriesIds)),n=g(!1);at(async()=>{await l()});async function l(){n.value=!0;try{const d=await k.loadMainPage();ot(d.data.data)&&m(),o.categoriesIds=[...d.data.data],o.updateAmountTotal()}finally{n.value=!1}}function m(){k.reset(),H.reset(),mt.reset()}return(d,v)=>{const h=a("v-progress-linear"),y=a("v-fade-transition"),S=a("v-expansion-panels");return c(),x("div",null,[r("div",Lt,[e(y,null,{default:s(()=>[G(e(h,{indeterminate:""},null,512),[[st,n.value]])]),_:1})]),e(y,{mode:"out-in"},{default:s(()=>[i.value.length?(c(),x("div",jt,[e(S,{multiple:"",modelValue:p(o).accountsPanelModel,"onUpdate:modelValue":v[0]||(v[0]=u=>p(o).accountsPanelModel=u)},{default:s(()=>[(c(!0),x(F,null,L(i.value,u=>(c(),A(Pt,{key:u.id,category:u},null,8,["category"]))),128))]),_:1},8,["modelValue"])])):D("",!0)]),_:1})])}}},K=t=>(O("data-v-b8db70bc"),t=t(),R(),t),Ot={class:"text-center mb-4"},Rt={class:"s-card-text-block"},zt=K(()=>r("div",null,"Категорія рахунку",-1)),Yt={class:"s-card-text-block"},Gt=K(()=>r("div",null,"Тип рахунку",-1)),Wt={__name:"TheCreateAccount",emits:["accountSave","dialogClose"],setup(t,{emit:o}){const i=o;_t();const n=W(),l=j(),m=g(),{check:d}=ht(m),v=[vt];async function h(){await d()&&(i("accountSave"),y(),await n.saveAccount())}function y(){const _=n.account.getRelation("category");l.addCategoryId(_)}function S(_){n.createAccountSum(_)}function u(_){_===z&&n.resetAccountSum()}return(_,f)=>{const V=a("v-text-field"),w=a("v-divider"),U=a("v-select"),E=a("v-form"),q=a("v-card-text"),M=a("v-spacer"),I=a("v-btn"),P=a("v-card-actions"),b=a("v-card");return c(),A(b,{"prepend-icon":"mdi-credit-card-plus-outline",title:"Додати рахунок"},{default:s(()=>[e(q,null,{default:s(()=>[r("div",Ot,[e(pt,{modelValue:p(n).account.icon,"onUpdate:modelValue":f[0]||(f[0]=C=>p(n).account.icon=C)},null,8,["modelValue"])]),p(n).account?(c(),A(E,{key:0,ref_key:"form",ref:m},{default:s(()=>[e(V,{autofocus:"",label:"Назва рахунку",modelValue:p(n).account.name,"onUpdate:modelValue":f[1]||(f[1]=C=>p(n).account.name=C),rules:v},null,8,["modelValue"]),r("div",Rt,[r("div",null,[zt,r("div",null,$(p(n).account.category.name),1)]),e(w)]),r("div",Yt,[r("div",null,[Gt,r("div",null,[e(U,{modelValue:p(n).account.place_type,"onUpdate:modelValue":[f[2]||(f[2]=C=>p(n).account.place_type=C),u],"item-value":"value","item-title":"label",items:p(Y),variant:"underlined"},null,8,["modelValue","items"])])]),e(w)]),p(n).account.place_type===p(it)?(c(),A(lt,{key:0,"account-sums":p(n).sums,"is-create-first":!0,onCreatedAccountSum:S},null,8,["account-sums"])):D("",!0)]),_:1},512)):D("",!0)]),_:1}),e(w),e(P,null,{default:s(()=>[e(M),e(I,{text:"Відміна",variant:"plain",onClick:f[3]||(f[3]=C=>_.$emit("dialogClose"))}),e(I,{color:"primary",text:"Зберегти",variant:"tonal",onClick:h})]),_:1})]),_:1})}}},Ht=N(Wt,[["__scopeId","data-v-b8db70bc"]]),Xt={class:"text-center"},Jt={class:"d-flex flex-column align-center justify-center fill-height"},Kt={class:"text-center"},Qt={__name:"TheAddAccount",setup(t){const o=W(),i=g(!1),n=g(!1),l=g(!1),m=g([]),d=T(()=>k.findIn(m.value));async function v(){n.value=!0;try{const u=await k.query().setUpdateMode(ut).get();m.value=u.data.data}finally{n.value=!1}}const h=async()=>{rt(d.value)&&await v(),l.value=!0};function y(u){o.resetAccountSum(),o.createAccount(u),i.value=!0}function S(){l.value=!1,i.value=!1}return(u,_)=>{const f=a("v-icon"),V=a("v-btn"),w=a("v-sheet"),U=a("v-col"),E=a("v-row"),q=a("v-container"),M=a("v-card"),I=a("v-bottom-sheet"),P=ct("ripple");return c(),x(F,null,[r("div",Xt,[e(V,{variant:"outlined",loading:n.value,onClick:h},{default:s(()=>[e(f,{icon:"mdi-wallet-plus-outline"})]),_:1},8,["loading"])]),e(I,{modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=b=>l.value=b)},{default:s(()=>[e(M,null,{default:s(()=>[e(q,null,{default:s(()=>[e(E,null,{default:s(()=>[(c(!0),x(F,null,L(d.value,b=>(c(),A(U,{cols:"6"},{default:s(()=>[G((c(),A(w,{border:"",rounded:"lg",height:"100",class:"w-100 bg-grey-lighten-3",onClick:C=>y(b.id)},{default:s(()=>[r("div",Jt,[e(f,{class:"mb-1",icon:b.icon},null,8,["icon"]),r("div",Kt,$(b.name),1)])]),_:2},1032,["onClick"])),[[P]])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ft,{modelValue:i.value,"onUpdate:modelValue":_[2]||(_[2]=b=>i.value=b)},{default:s(()=>[e(Ht,{onAccountSave:S,onDialogClose:_[1]||(_[1]=b=>i.value=!1)})]),_:1},8,["modelValue"])],64)}}},Zt={class:"pa-2"},ie={__name:"Index",setup(t){return(o,i)=>(c(),x("div",Zt,[e(wt,{class:"mb-4"}),e(Bt,{class:"mb-5"}),e(Qt)]))}};export{ie as default};
