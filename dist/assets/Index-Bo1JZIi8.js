import{A as J,m as K,o as c,d as f,t as w,j as h,n as T,q as Q,s as X,b as y,_ as D,x as L,r as n,w as s,k as e,f as Y,a as l,e as B,p as P,g as R,c as b,y as Z,F as V,z as j,B as tt,l as z,v as et,C as nt,D as at,M as ot}from"./index-BCfnNAGH.js";import{u as E,a as O,_ as st,r as it,b as ct,c as rt}from"./DialogComponent-B-QWQ62J.js";import{A as W,t as G,a as $,b as ut,u as lt}from"./entities-BuFZRM3B.js";import"./CurrenciesList-CUSLOgvq.js";class dt extends J{getResource(){return"accounts"}static balanceTotal(){return new this().balanceTotal()}async balanceTotal(){return await this.get("/balance-total")}}var H=K({name:"Vue3Autocounter",interval:null,props:{startAmount:{type:Number,default:0},endAmount:{type:Number,default:0,required:!0},duration:{type:Number,default:3,validator(t){return t>=1}},autoinit:{type:Boolean,default:!0},prefix:{type:String,default:""},suffix:{type:String,default:""},separator:{type:String,default:","},decimalSeparator:{type:String,default:"."},decimals:{type:Number,default:0,validator(t){return t>=0}}},data(){return{timestamp:0,startTimestamp:0,currentAmount:0,currentStartAmount:0,currentDuration:0,paused:!1,remaining:0,animationFrame:0}},mounted(){this.currentAmount=this.startAmount,this.currentStartAmount=this.startAmount,this.currentDuration=this.duration*1e3,this.remaining=this.duration*1e3,this.autoinit?this.start():this.paused=!0,this.$emit("mounted")},unmounted(){this.cancelAnimation()},watch:{startAmount(){this.reset()},endAmount(){this.reset()},duration(){this.reset()}},computed:{isCountingUp(){return this.endAmount>this.startAmount},displayedAmount(){return`${this.prefix}${this.formatedAmount}${this.suffix}`},formatedAmount(){const t=/(\d+)(\d{3})/;let a=this.currentAmount.toFixed(this.decimals);a+="";let i=a.split("."),o=i[0],r=i.length>1?this.decimalSeparator+i[1]:"",u=!isNaN(parseFloat(this.separator));if(this.separator&&!u)for(;t.test(o);)o=o.replace(t,"$1"+this.separator+"$2");return o+r}},methods:{start(){this.cancelAnimation(),this.currentStartAmount=this.startAmount,this.startTimestamp=null,this.currentDuration=this.duration*1e3,this.paused=!1,this.animationFrame=window.requestAnimationFrame(this.counting)},pause(){this.paused||(this.cancelAnimation(),this.paused=!0)},resume(){this.paused&&(this.startTimestamp=null,this.currentDuration=+this.remaining,this.currentStartAmount=+this.currentAmount,this.animationFrame=window.requestAnimationFrame(this.counting),this.paused=!1)},reset(){this.paused=!1,this.startTimestamp=null,this.cancelAnimation(),this.currentAmount=this.startAmount,this.autoinit?this.start():this.paused=!0},counting(t){this.timestamp=t,this.startTimestamp||(this.startTimestamp=t);let a=t-this.startTimestamp;this.remaining=this.currentDuration-a,this.isCountingUp?(this.currentAmount=this.currentStartAmount+(this.endAmount-this.currentStartAmount)*(a/this.currentDuration),this.currentAmount=this.currentAmount>this.endAmount?this.endAmount:this.currentAmount):(this.currentAmount=this.currentStartAmount-(this.currentStartAmount-this.endAmount)*(a/this.currentDuration),this.currentAmount=this.currentAmount<this.endAmount?this.endAmount:this.currentAmount),a<this.currentDuration?this.animationFrame=window.requestAnimationFrame(this.counting):setTimeout(()=>{this.$emit("finished")},1e3)},cancelAnimation(){this.animationFrame&&window.cancelAnimationFrame(this.animationFrame)}}});function mt(t,a,i,o,r,u){return c(),f("span",null,w(t.displayedAmount),1)}H.render=mt;var _t=(()=>{const t=H;return t.install=a=>{a.component("Vue3Autocounter",t)},t})();const pt={__name:"AnimateCounter",props:{counter:{type:Number,required:!0},suffix:{type:String,default:""},prefix:{type:String,default:""},decimals:{type:Number,default:0}},emits:["finished"],setup(t,{emit:a}){const i=t,o=a,r=h(),u=h(i.counter),d=T(()=>i.counter);return Q(d,async(g,_)=>{u.value=_,await X(),r.value.start()}),(g,_)=>(c(),f(y(_t),{ref_key:"counter",ref:r,startAmount:u.value,endAmount:d.value,duration:1,prefix:t.prefix,suffix:t.suffix,separator:" ",decimalSeparator:",",decimals:t.decimals,autoinit:!1,onFinished:_[0]||(_[0]=A=>o("finished"))},null,8,["startAmount","endAmount","prefix","suffix","decimals"]))}},vt=t=>(P("data-v-bdaae148"),t=t(),R(),t),ht=vt(()=>l("div",{class:"subheading font-weight-light text-grey mb-2"}," Статок ",-1)),ft={class:"text-h6 font-weight-light"},gt={__name:"TheWealthChart",setup(t){const a=E(),i=h(["січ","лют","бер","квіт","трав","черв","лип","сер"]),o=h([200,675,410,390,310,460,250,240]),r=h(!1);L(u);async function u(){r.value=!0;try{const d=await dt.balanceTotal();a.amountTotal=d.data.data}finally{r.value=!1}}return(d,g)=>{const _=n("v-sparkline"),A=n("v-sheet"),p=n("v-progress-circular"),m=n("v-fade-transition"),v=n("v-card-text"),S=n("v-card");return c(),f(S,{class:"mt-8 mx-auto overflow-visible","max-width":"400"},{default:s(()=>[e(A,{class:"v-sheet--offset mx-auto",color:"cyan",elevation:"12","max-width":"calc(100% - 32px)",rounded:"lg"},{default:s(()=>[e(_,{"auto-draw":"",labels:i.value,"model-value":o.value,color:"white","line-width":"2",padding:"16"},{label:s(C=>[Y(w(C.value)+". ",1)]),_:1},8,["labels","model-value"])]),_:1}),e(v,{class:"pt-0"},{default:s(()=>[ht,l("div",ft,[e(pt,{counter:y(a).amountTotal,suffix:" ₴"},null,8,["counter"]),e(m,null,{default:s(()=>[r.value?(c(),f(p,{key:0,indeterminate:"",size:20,width:3,class:"ml-4"})):B("",!0)]),_:1})])]),_:1})]),_:1})}}},At=D(gt,[["__scopeId","data-v-bdaae148"]]),xt={class:"d-flex justify-space-between"},yt={class:"text-truncate"},bt={__name:"AccountItem",props:{account:{type:Object,required:!0,validator:t=>t instanceof W},icon:String},setup(t){const a=t,i=T(()=>G(a.account.getSum(),{minimumFractionDigits:0}));return(o,r)=>{const u=n("v-avatar"),d=n("v-list-item");return c(),f(d,{to:{name:"accounts.show",params:{id:t.account.id}},class:"s-list-item"},{prepend:s(()=>[e(u,{class:"s-handle-sorting-account-item",icon:t.icon,color:"green"},null,8,["icon"])]),title:s(()=>[l("div",xt,[l("div",yt,w(t.account.name),1),l("div",null,[l("span",null,w(i.value),1)])])]),_:1},8,["to"])}}},wt=D(bt,[["__scopeId","data-v-6a6b1879"]]),St={class:"d-flex w-100 justify-space-between align-center"},$t={class:"s-handle-sorting-account-group"},Ct={key:"0"},Tt={key:"1"},kt={__name:"AccountCategoryItem",props:{category:{type:Object,required:!0,validator:t=>t instanceof $}},setup(t){const a=t,i=T(()=>G(a.category.getSum(),{minimumFractionDigits:0}));return(o,r)=>{const u=n("v-icon"),d=n("v-expansion-panel-title"),g=n("v-list"),_=n("v-expansion-panel-text"),A=n("v-expansion-panel");return c(),f(A,null,{default:s(()=>[e(d,{"hide-actions":"",class:"s-panel-title"},{default:s(({expanded:p})=>[l("div",St,[l("div",$t,[p?(c(),b("span",Ct,[e(u,{icon:"mdi-menu-down"})])):(c(),b("span",Tt,[e(u,{icon:"mdi-menu-right"})])),l("span",null,w(t.category.name),1)]),l("div",{class:Z({"text-grey":p})},[l("span",null,w(i.value),1)],2)])]),_:1}),e(_,{class:"s-custom-expansion-panel-text"},{default:s(()=>[e(g,null,{default:s(()=>[(c(!0),b(V,null,j(t.category.accounts,p=>(c(),f(wt,{key:p.id,account:p,icon:t.category.icon},null,8,["account","icon"]))),128))]),_:1})]),_:1})]),_:1})}}},It=D(kt,[["__scopeId","data-v-c93a20d9"]]),Vt={style:{height:"4px"}},Dt={key:0},Ft={__name:"TheAccounts",setup(t){const a=E();h([]);const i=T(()=>$.findIn(a.categoriesIds)),o=h(!1);L(async()=>{await r()});async function r(){o.value=!0;try{const d=await $.loadMainPage();tt(d.data.data)&&u(),a.categoriesIds=[...d.data.data]}finally{o.value=!1}}function u(){$.reset(),W.reset(),ut.reset()}return(d,g)=>{const _=n("v-progress-linear"),A=n("v-fade-transition"),p=n("v-expansion-panels");return c(),b("div",null,[l("div",Vt,[e(A,null,{default:s(()=>[z(e(_,{indeterminate:""},null,512),[[et,o.value]])]),_:1})]),e(A,{mode:"out-in"},{default:s(()=>[i.value.length?(c(),b("div",Dt,[e(p,{multiple:"",modelValue:y(a).accountsPanelModel,"onUpdate:modelValue":g[0]||(g[0]=m=>y(a).accountsPanelModel=m)},{default:s(()=>[(c(!0),b(V,null,j(i.value,m=>(c(),f(It,{key:m.id,category:m},null,8,["category"]))),128))]),_:1},8,["modelValue"])])):B("",!0)]),_:1})])}}},Nt=t=>(P("data-v-69c3f97c"),t=t(),R(),t),qt={class:"text-center mb-4"},Ut={class:"s-card-text-block"},Mt=Nt(()=>l("div",null,"Тип рахунку",-1)),Bt={__name:"TheCreateAccount",emits:["accountSave","dialogClose"],setup(t,{emit:a}){const i=a;lt();const o=O(),r=E(),u=h(),{check:d}=ct(u),g=[it];async function _(){await d()&&(i("accountSave"),A(),await o.saveAccount())}function A(){const m=o.account.getRelation("category");r.addCategoryId(m)}function p(m){o.createAccountSum(m)}return(m,v)=>{const S=n("v-avatar"),C=n("v-text-field"),k=n("v-divider"),F=n("v-form"),N=n("v-card-text"),q=n("v-spacer"),I=n("v-btn"),U=n("v-card-actions"),M=n("v-card");return c(),f(M,{"prepend-icon":"mdi-credit-card-plus-outline",title:"Додати рахунок"},{default:s(()=>[e(N,null,{default:s(()=>[l("div",qt,[e(S,{size:"x-large",icon:"mdi-cash",color:"green"})]),y(o).account?(c(),f(F,{key:0,ref_key:"form",ref:u},{default:s(()=>[e(C,{autofocus:"",label:"Назва рахунку",modelValue:y(o).account.name,"onUpdate:modelValue":v[0]||(v[0]=x=>y(o).account.name=x),rules:g},null,8,["modelValue"]),l("div",Ut,[l("div",null,[Mt,l("div",null,w(y(o).account.category.name),1)]),e(k)]),e(st,{"account-sums":y(o).sums,"is-create-first":!0,onCreatedAccountSum:p},null,8,["account-sums"])]),_:1},512)):B("",!0)]),_:1}),e(k),e(U,null,{default:s(()=>[e(q),e(I,{text:"Відміна",variant:"plain",onClick:v[1]||(v[1]=x=>m.$emit("dialogClose"))}),e(I,{color:"primary",text:"Зберегти",variant:"tonal",onClick:_})]),_:1})]),_:1})}}},jt=D(Bt,[["__scopeId","data-v-69c3f97c"]]),Et={class:"text-center"},Lt={class:"d-flex flex-column align-center justify-center fill-height"},Pt={class:"text-center"},Rt={__name:"TheAddAccount",setup(t){const a=O(),i=h(!1),o=h(!1),r=h(!1),u=h([]),d=T(()=>$.findIn(u.value));async function g(){o.value=!0;try{const m=await $.query().setUpdateMode(ot).get();u.value=m.data.data}finally{o.value=!1}}const _=async()=>{at(d.value)&&await g(),r.value=!0};function A(m){a.resetAccountSum(),a.createAccount(m),i.value=!0}function p(){r.value=!1,i.value=!1}return(m,v)=>{const S=n("v-icon"),C=n("v-btn"),k=n("v-sheet"),F=n("v-col"),N=n("v-row"),q=n("v-container"),I=n("v-card"),U=n("v-bottom-sheet"),M=nt("ripple");return c(),b(V,null,[l("div",Et,[e(C,{variant:"outlined",loading:o.value,onClick:_},{default:s(()=>[e(S,{icon:"mdi-wallet-plus-outline"})]),_:1},8,["loading"])]),e(U,{modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=x=>r.value=x)},{default:s(()=>[e(I,null,{default:s(()=>[e(q,null,{default:s(()=>[e(N,null,{default:s(()=>[(c(!0),b(V,null,j(d.value,x=>(c(),f(F,{cols:"6"},{default:s(()=>[z((c(),f(k,{border:"",rounded:"lg",height:"100",class:"w-100 bg-grey-lighten-3",onClick:Ot=>A(x.id)},{default:s(()=>[l("div",Lt,[e(S,{class:"mb-1",icon:x.icon},null,8,["icon"]),l("div",Pt,w(x.name),1)])]),_:2},1032,["onClick"])),[[M]])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(rt,{modelValue:i.value,"onUpdate:modelValue":v[2]||(v[2]=x=>i.value=x)},{default:s(()=>[e(jt,{onAccountSave:p,onDialogClose:v[1]||(v[1]=x=>i.value=!1)})]),_:1},8,["modelValue"])],64)}}},zt={class:"pa-2"},Kt={__name:"Index",setup(t){return(a,i)=>(c(),b("div",zt,[e(At,{class:"mb-4"}),e(Ft,{class:"mb-5"}),e(Rt)]))}};export{Kt as default};
