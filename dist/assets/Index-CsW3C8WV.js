import{m as J,o as c,d as h,t as w,j as f,n as I,q as K,s as Q,b as A,_ as F,r as a,w as s,k as e,f as X,a as u,e as j,p as P,g as z,c as y,x as Y,F as T,y as B,z as Z,A as tt,l as O,v as et,B as nt,C as at,M as ot}from"./index-uNLpc8m8.js";import{u as E,a as R,_ as st}from"./create.store-YR5BmbDU.js";import{u as L}from"./currency_decimal_convert-KKbzYINo.js";import{A as W,t as G,i as it,a as k,b as rt,u as ct}from"./entities-DXs83vKd.js";import{_ as ut,r as lt,u as dt,a as mt}from"./DialogComponent-DSQFJjBp.js";import"./CurrenciesList-FRp3ZG6X.js";var H=J({name:"Vue3Autocounter",interval:null,props:{startAmount:{type:Number,default:0},endAmount:{type:Number,default:0,required:!0},duration:{type:Number,default:3,validator(t){return t>=1}},autoinit:{type:Boolean,default:!0},prefix:{type:String,default:""},suffix:{type:String,default:""},separator:{type:String,default:","},decimalSeparator:{type:String,default:"."},decimals:{type:Number,default:0,validator(t){return t>=0}}},data(){return{timestamp:0,startTimestamp:0,currentAmount:0,currentStartAmount:0,currentDuration:0,paused:!1,remaining:0,animationFrame:0}},mounted(){this.currentAmount=this.startAmount,this.currentStartAmount=this.startAmount,this.currentDuration=this.duration*1e3,this.remaining=this.duration*1e3,this.autoinit?this.start():this.paused=!0,this.$emit("mounted")},unmounted(){this.cancelAnimation()},watch:{startAmount(){this.reset()},endAmount(){this.reset()},duration(){this.reset()}},computed:{isCountingUp(){return this.endAmount>this.startAmount},displayedAmount(){return`${this.prefix}${this.formatedAmount}${this.suffix}`},formatedAmount(){const t=/(\d+)(\d{3})/;let o=this.currentAmount.toFixed(this.decimals);o+="";let i=o.split("."),n=i[0],l=i.length>1?this.decimalSeparator+i[1]:"",m=!isNaN(parseFloat(this.separator));if(this.separator&&!m)for(;t.test(n);)n=n.replace(t,"$1"+this.separator+"$2");return n+l}},methods:{start(){this.cancelAnimation(),this.currentStartAmount=this.startAmount,this.startTimestamp=null,this.currentDuration=this.duration*1e3,this.paused=!1,this.animationFrame=window.requestAnimationFrame(this.counting)},pause(){this.paused||(this.cancelAnimation(),this.paused=!0)},resume(){this.paused&&(this.startTimestamp=null,this.currentDuration=+this.remaining,this.currentStartAmount=+this.currentAmount,this.animationFrame=window.requestAnimationFrame(this.counting),this.paused=!1)},reset(){this.paused=!1,this.startTimestamp=null,this.cancelAnimation(),this.currentAmount=this.startAmount,this.autoinit?this.start():this.paused=!0},counting(t){this.timestamp=t,this.startTimestamp||(this.startTimestamp=t);let o=t-this.startTimestamp;this.remaining=this.currentDuration-o,this.isCountingUp?(this.currentAmount=this.currentStartAmount+(this.endAmount-this.currentStartAmount)*(o/this.currentDuration),this.currentAmount=this.currentAmount>this.endAmount?this.endAmount:this.currentAmount):(this.currentAmount=this.currentStartAmount-(this.currentStartAmount-this.endAmount)*(o/this.currentDuration),this.currentAmount=this.currentAmount<this.endAmount?this.endAmount:this.currentAmount),o<this.currentDuration?this.animationFrame=window.requestAnimationFrame(this.counting):setTimeout(()=>{this.$emit("finished")},1e3)},cancelAnimation(){this.animationFrame&&window.cancelAnimationFrame(this.animationFrame)}}});function _t(t,o,i,n,l,m){return c(),h("span",null,w(t.displayedAmount),1)}H.render=_t;var pt=(()=>{const t=H;return t.install=o=>{o.component("Vue3Autocounter",t)},t})();const vt={__name:"AnimateCounter",props:{counter:{type:Number,required:!0},suffix:{type:String,default:""},prefix:{type:String,default:""},decimals:{type:Number,default:0}},emits:["finished"],setup(t,{emit:o}){const i=t,n=o,l=f(),m=f(i.counter),d=I(()=>i.counter);return K(d,async(p,v)=>{m.value=v,await Q(),l.value.start()}),(p,v)=>(c(),h(A(pt),{ref_key:"counter",ref:l,startAmount:m.value,endAmount:d.value,duration:1,prefix:t.prefix,suffix:t.suffix,separator:" ",decimalSeparator:",",decimals:t.decimals,autoinit:!1,onFinished:v[0]||(v[0]=g=>n("finished"))},null,8,["startAmount","endAmount","prefix","suffix","decimals"]))}},ft=t=>(P("data-v-4083970f"),t=t(),z(),t),ht=ft(()=>u("div",{class:"subheading font-weight-light text-grey mb-2"}," Статок ",-1)),gt={class:"text-h6 font-weight-light"},At={__name:"TheWealthChart",setup(t){const o=E(),{toDecimal:i}=L(),n=f(["січ","лют","бер","квіт","трав","черв","лип","сер"]),l=f([200,675,410,390,310,460,250,240]),m=f(!1),d=I(()=>i(o.amountTotal));return(p,v)=>{const g=a("v-sparkline"),x=a("v-sheet"),r=a("v-progress-circular"),_=a("v-fade-transition"),$=a("v-card-text"),b=a("v-card");return c(),h(b,{class:"mt-8 mx-auto overflow-visible","max-width":"400"},{default:s(()=>[e(x,{class:"v-sheet--offset mx-auto",color:"cyan",elevation:"12","max-width":"calc(100% - 32px)",rounded:"lg"},{default:s(()=>[e(g,{"auto-draw":"",labels:n.value,"model-value":l.value,color:"white","line-width":"2",padding:"16"},{label:s(V=>[X(w(V.value)+". ",1)]),_:1},8,["labels","model-value"])]),_:1}),e($,{class:"pt-0"},{default:s(()=>[ht,u("div",gt,[e(vt,{counter:d.value,suffix:" ₴"},null,8,["counter"]),e(_,null,{default:s(()=>[m.value?(c(),h(r,{key:0,indeterminate:"",size:20,width:3,class:"ml-4"})):j("",!0)]),_:1})])]),_:1})]),_:1})}}},xt=F(At,[["__scopeId","data-v-4083970f"]]),yt={class:"d-flex justify-space-between"},St={class:"text-truncate"},wt={class:"ml-2"},$t={__name:"AccountItem",props:{account:{type:Object,required:!0,validator:t=>t instanceof W}},setup(t){const o=t,{toDecimal:i}=L(),n=I(()=>G(i(o.account.getSumInMineCurrency()),{maximumFractionDigits:0}));return(l,m)=>{const d=a("v-avatar"),p=a("v-list-item");return c(),h(p,{to:{name:"accounts.show",params:{id:t.account.id}},class:"s-list-item"},{prepend:s(()=>[e(d,{class:"s-handle-sorting-account-item",icon:t.account.icon,color:"green"},null,8,["icon"])]),title:s(()=>[u("div",yt,[u("div",St,w(t.account.name),1),u("div",wt,[u("span",null,w(n.value),1)])])]),_:1},8,["to"])}}},bt=F($t,[["__scopeId","data-v-f66faef0"]]),Ct={class:"d-flex w-100 justify-space-between align-center"},It={class:"s-handle-sorting-account-group"},Vt={key:"0"},kt={key:"1"},Dt={__name:"AccountCategoryItem",props:{category:{type:Object,required:!0,validator:it}},setup(t){const o=t,{toDecimal:i}=L(),n=I(()=>G(i(o.category.getSumInMineCurrency()),{maximumFractionDigits:0}));return(l,m)=>{const d=a("v-icon"),p=a("v-expansion-panel-title"),v=a("v-list"),g=a("v-expansion-panel-text"),x=a("v-expansion-panel");return c(),h(x,null,{default:s(()=>[e(p,{"hide-actions":"",class:"s-panel-title"},{default:s(({expanded:r})=>[u("div",Ct,[u("div",It,[r?(c(),y("span",Vt,[e(d,{icon:"mdi-menu-down"})])):(c(),y("span",kt,[e(d,{icon:"mdi-menu-right"})])),u("span",null,w(t.category.name),1)]),u("div",{class:Y({"text-grey":r})},[u("span",null,w(n.value),1)],2)])]),_:1}),e(g,{class:"s-custom-expansion-panel-text"},{default:s(()=>[e(v,null,{default:s(()=>[(c(!0),y(T,null,B(t.category.accounts,r=>(c(),h(bt,{key:r.id,account:r},null,8,["account"]))),128))]),_:1})]),_:1})]),_:1})}}},Tt=F(Dt,[["__scopeId","data-v-505d6249"]]),Ft={style:{height:"4px"}},Nt={key:0},qt={__name:"TheAccounts",setup(t){const o=E();f([]);const i=I(()=>k.findIn(o.categoriesIds)),n=f(!1);Z(async()=>{await l()});async function l(){n.value=!0;try{const d=await k.loadMainPage();tt(d.data.data)&&m(),o.categoriesIds=[...d.data.data],o.updateAmountTotal()}finally{n.value=!1}}function m(){k.reset(),W.reset(),rt.reset()}return(d,p)=>{const v=a("v-progress-linear"),g=a("v-fade-transition"),x=a("v-expansion-panels");return c(),y("div",null,[u("div",Ft,[e(g,null,{default:s(()=>[O(e(v,{indeterminate:""},null,512),[[et,n.value]])]),_:1})]),e(g,{mode:"out-in"},{default:s(()=>[i.value.length?(c(),y("div",Nt,[e(x,{multiple:"",modelValue:A(o).accountsPanelModel,"onUpdate:modelValue":p[0]||(p[0]=r=>A(o).accountsPanelModel=r)},{default:s(()=>[(c(!0),y(T,null,B(i.value,r=>(c(),h(Tt,{key:r.id,category:r},null,8,["category"]))),128))]),_:1},8,["modelValue"])])):j("",!0)]),_:1})])}}},Mt=t=>(P("data-v-6a66f9d1"),t=t(),z(),t),Ut={class:"text-center mb-4"},jt={class:"s-card-text-block"},Bt=Mt(()=>u("div",null,"Тип рахунку",-1)),Et={__name:"TheCreateAccount",emits:["accountSave","dialogClose"],setup(t,{emit:o}){const i=o;ct();const n=R(),l=E(),m=f(),{check:d}=dt(m),p=[lt];async function v(){await d()&&(i("accountSave"),g(),await n.saveAccount())}function g(){const r=n.account.getRelation("category");l.addCategoryId(r)}function x(r){n.createAccountSum(r)}return(r,_)=>{const $=a("v-text-field"),b=a("v-divider"),V=a("v-form"),N=a("v-card-text"),q=a("v-spacer"),D=a("v-btn"),M=a("v-card-actions"),U=a("v-card");return c(),h(U,{"prepend-icon":"mdi-credit-card-plus-outline",title:"Додати рахунок"},{default:s(()=>[e(N,null,{default:s(()=>[u("div",Ut,[e(ut,{modelValue:A(n).account.icon,"onUpdate:modelValue":_[0]||(_[0]=C=>A(n).account.icon=C)},null,8,["modelValue"])]),A(n).account?(c(),h(V,{key:0,ref_key:"form",ref:m},{default:s(()=>[e($,{autofocus:"",label:"Назва рахунку",modelValue:A(n).account.name,"onUpdate:modelValue":_[1]||(_[1]=C=>A(n).account.name=C),rules:p},null,8,["modelValue"]),u("div",jt,[u("div",null,[Bt,u("div",null,w(A(n).account.category.name),1)]),e(b)]),e(st,{"account-sums":A(n).sums,"is-create-first":!0,onCreatedAccountSum:x},null,8,["account-sums"])]),_:1},512)):j("",!0)]),_:1}),e(b),e(M,null,{default:s(()=>[e(q),e(D,{text:"Відміна",variant:"plain",onClick:_[2]||(_[2]=C=>r.$emit("dialogClose"))}),e(D,{color:"primary",text:"Зберегти",variant:"tonal",onClick:v})]),_:1})]),_:1})}}},Lt=F(Et,[["__scopeId","data-v-6a66f9d1"]]),Pt={class:"text-center"},zt={class:"d-flex flex-column align-center justify-center fill-height"},Ot={class:"text-center"},Rt={__name:"TheAddAccount",setup(t){const o=R(),i=f(!1),n=f(!1),l=f(!1),m=f([]),d=I(()=>k.findIn(m.value));async function p(){n.value=!0;try{const r=await k.query().setUpdateMode(ot).get();m.value=r.data.data}finally{n.value=!1}}const v=async()=>{at(d.value)&&await p(),l.value=!0};function g(r){o.resetAccountSum(),o.createAccount(r),i.value=!0}function x(){l.value=!1,i.value=!1}return(r,_)=>{const $=a("v-icon"),b=a("v-btn"),V=a("v-sheet"),N=a("v-col"),q=a("v-row"),D=a("v-container"),M=a("v-card"),U=a("v-bottom-sheet"),C=nt("ripple");return c(),y(T,null,[u("div",Pt,[e(b,{variant:"outlined",loading:n.value,onClick:v},{default:s(()=>[e($,{icon:"mdi-wallet-plus-outline"})]),_:1},8,["loading"])]),e(U,{modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=S=>l.value=S)},{default:s(()=>[e(M,null,{default:s(()=>[e(D,null,{default:s(()=>[e(q,null,{default:s(()=>[(c(!0),y(T,null,B(d.value,S=>(c(),h(N,{cols:"6"},{default:s(()=>[O((c(),h(V,{border:"",rounded:"lg",height:"100",class:"w-100 bg-grey-lighten-3",onClick:Gt=>g(S.id)},{default:s(()=>[u("div",zt,[e($,{class:"mb-1",icon:S.icon},null,8,["icon"]),u("div",Ot,w(S.name),1)])]),_:2},1032,["onClick"])),[[C]])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(mt,{modelValue:i.value,"onUpdate:modelValue":_[2]||(_[2]=S=>i.value=S)},{default:s(()=>[e(Lt,{onAccountSave:x,onDialogClose:_[1]||(_[1]=S=>i.value=!1)})]),_:1},8,["modelValue"])],64)}}},Wt={class:"pa-2"},Zt={__name:"Index",setup(t){return(o,i)=>(c(),y("div",Wt,[e(xt,{class:"mb-4"}),e(qt,{class:"mb-5"}),e(Rt)]))}};export{Zt as default};
