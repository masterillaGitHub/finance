import{u as h,a as w}from"./form.store-Cz_gLrPN.js";import{_ as S}from"./BottomConfirm-Dk0gr7nc.js";import{i as C,j as v,r as o,o as u,c as f,k as t,w as y,F as I,n as k,B as A,I as D,R as N,S as P,T as $,Q as b,d as B,a as M}from"./index-BzizgZbg.js";import{_ as F,a as V,b as U}from"./TheAmount-DlmhDCXs.js";import{T}from"./entities-Ld4GelJy.js";import{u as Y}from"./currency_decimal_convert-KKbzYINo.js";import"./CurrenciesList-BZ_0te8g.js";const q={__name:"TheAppBar",emits:["removeTransaction"],setup(g,{emit:l}){h();const m=C(),_=l,a=v(!1);function s(){_("removeTransaction"),m.push({name:"transactions.index"})}return(r,e)=>{const c=o("v-btn"),d=o("v-spacer"),p=o("v-app-bar");return u(),f(I,null,[t(p,{elevation:2,density:"compact"},{prepend:y(()=>[t(c,{icon:"mdi-arrow-left",to:{name:"transactions.index"}})]),default:y(()=>[t(d),t(c,{class:"text-red",icon:"mdi-delete-outline",size:"large",variant:"plain",onClick:e[0]||(e[0]=i=>a.value=!0)})]),_:1}),t(S,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=i=>a.value=i),title:"Видалити?",onSuccess:s},null,8,["modelValue"])],64)}}},L={key:1,class:"fill-height d-flex flex-column"},O=M("div",{class:"flex-grow-1"},null,-1),W={__name:"Edit",props:{id:{type:[Number,String],required:!0}},setup(g){const l=g,{toMinus:m,toPlus:_}=Y(),a=w(),s=v(),r=v(!0),e=k(()=>T.find(s.value));A(c),D(()=>{a.reset()});async function c(){r.value=!0;try{await d(),p()}finally{r.value=!1}}async function d(){const n=await T.query().setUpdateMode(N).setParams({include:"currency,type,account,category,to_account,to_currency","filter[id]":l.id}).get();s.value=n.data.data[0]}function p(){a.$patch({amount:i(e.value.amount),currencyId:e.value.getRelation("currency"),typeId:e.value.getRelation("type"),accountId:e.value.getRelation("account"),categoryId:e.value.getRelation("category"),tagIds:[],date:new Date(e.value.transaction_at_timestamp*1e3),toAccountId:e.value.getRelation("to_account"),toCurrencyId:e.value.getRelation("to_currency"),toAmount:e.value.to_amount,transactionId:e.value.id})}const i=n=>{switch(e.value.getRelation("type")){case b:case $:return m(n);case P:return _(n)}},E=()=>{e.value.destroy()};return(n,j)=>{const R=o("v-progress-linear"),x=o("v-fade-transition");return u(),f(I,null,[t(q,{onRemoveTransaction:E}),t(x,{mode:"out-in"},{default:y(()=>[r.value?(u(),B(R,{key:0,indeterminate:""})):(u(),f("div",L,[O,t(F),t(V),t(U)]))]),_:1})],64)}}};export{W as default};
